<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>lib-common: qps.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">lib-common
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.html','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">qps.h</div></div>
</div><!--header-->
<div class="contents">
<a href="../../d2/d4d/qps_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/***************************************************************************/</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">/*                                                                         */</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">/* Copyright 2022 INTERSEC SA                                              */</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">/*                                                                         */</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">/* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);         */</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">/* you may not use this file except in compliance with the License.        */</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">/* You may obtain a copy of the License at                                 */</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">/*                                                                         */</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">/*     http://www.apache.org/licenses/LICENSE-2.0                          */</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">/*                                                                         */</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">/* Unless required by applicable law or agreed to in writing, software     */</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">/* distributed under the License is distributed on an &quot;AS IS&quot; BASIS,       */</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">/* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.*/</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">/* See the License for the specific language governing permissions and     */</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">/* limitations under the License.                                          */</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">/*                                                                         */</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">/***************************************************************************/</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#ifndef IS_LIB_COMMON_QPS_H</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#define IS_LIB_COMMON_QPS_H</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;sysexits.h&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;lib-common/unix.h&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;lib-common/log.h&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;lib-common/thr.h&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;lib-common/el.h&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment">/* define this flag to 1 to allow valgrind/asan to potentially detect incorect</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment"> * QPS API usage (WARNING: the QPS spool storage format is not compatible with</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="comment"> * the standard one) */</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a7fecad0d3a1eca07ecfebd2030d63035">   31</a></span><span class="preprocessor">#define QPS_USE_REDZONES 0</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="foldopen" id="foldopen00033" data-start="" data-end="">
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a8bbb59f5294ec43ecdb44475d4758a3d">   33</a></span><span class="preprocessor">#define qps_io_wrap(what, ...) \</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">    ({  typeof(what(__VA_ARGS__)) _res = what(__VA_ARGS__);  \</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">        if (unlikely(_res &lt; 0))                              \</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">            qps_enospc(NULL, #what);                         \</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">        _res; })</span></div>
</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#ad3a21699da7777f00481df8edb9f9d4b">   39</a></span><span class="preprocessor">#define x_close(...)      qps_io_wrap(close, __VA_ARGS__)</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a63988a2fbfbc3fcdbc71b5388ca7e59a">   40</a></span><span class="preprocessor">#define x_fdatasync(...)  qps_io_wrap(fdatasync, __VA_ARGS__)</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#ac91701cb115684cba862e56601b0da6d">   41</a></span><span class="preprocessor">#define x_ftruncate(...)  qps_io_wrap(xftruncate, __VA_ARGS__)</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#abdf3caa34f2f918ee9c92a350a9ec313">   42</a></span><span class="preprocessor">#define x_linkat(...)     qps_io_wrap(linkat, __VA_ARGS__)</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a18bbb018746eb3c407f2474ac10bdfd8">   43</a></span><span class="preprocessor">#define x_msync(...)      qps_io_wrap(msync, __VA_ARGS__)</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a097a667529958ee943c785119b2b516a">   44</a></span><span class="preprocessor">#define x_openat(...)     qps_io_wrap(openat, __VA_ARGS__)</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a153cbf10543a91ecd3e3a06bab457793">   45</a></span><span class="preprocessor">#define x_renameat(...)   qps_io_wrap(renameat, __VA_ARGS__)</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#aef63c086b1f52527762bd9bf1bf3415f">   46</a></span><span class="preprocessor">#define x_write(...)      qps_io_wrap(xwrite, __VA_ARGS__)</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#aa447c1c9ca0541e4a02123b4c47c0ac2">   47</a></span><span class="preprocessor">#define x_writev(...)     qps_io_wrap(xwritev, __VA_ARGS__)</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#ae4b96753963c6de1f23d1036ab831ab8">   48</a></span><span class="preprocessor">#define x_pwrite(...)     qps_io_wrap(xpwrite, __VA_ARGS__)</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a0e01f772250f22fc3c8b88f797820e3f">   49</a></span><span class="preprocessor">#define x_munmap(...)     qps_io_wrap(munmap, __VA_ARGS__)</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a7bd0d905a69ab6343d8154137c09e2c0">   50</a></span><span class="preprocessor">#define x_fchmodat(...)   qps_io_wrap(fchmodat, __VA_ARGS__)</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a0785c4ca120560219945bbfc276a5791">   51</a></span><span class="preprocessor">#define x_fchmod(...)     qps_io_wrap(fchmod, __VA_ARGS__)</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="foldopen" id="foldopen00053" data-start="" data-end="">
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a89c240b076dca83963d1873ae08dca5c">   53</a></span><span class="preprocessor">#define x_mmap(...) \</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">    ({  void *_ptr = mmap(__VA_ARGS__);                      \</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">        if (unlikely(_ptr == MAP_FAILED))                    \</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">            qps_enospc(NULL, &quot;mmap&quot;);                        \</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">        _ptr; })</span></div>
</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="comment"></span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="comment">/** \defgroup qkv__ll__qps  Quick Paged Store.</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="comment"> * \ingroup qkv__ll</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="comment"> * \brief Quick Paged Store.</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="comment"> *</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="comment"> * \{</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="comment"> *</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="comment"> * \section qps_intro QPS Principles</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="comment"> *</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment"> * QPS is an allocator, mostly paged (but not only) meant to allocate small</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment"> * amounts of memory (less than #QPS_ALLOC_MAX octets). Its goal is to provide</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment"> * a persistent snapshotable storage for allocations (see #qps_snapshot).</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment"> *</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment"> * It is up to the user to maintain and deal with its binlog that is able to</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment"> * reconstruct the full state of the memory allocator at any time.</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="comment"> *</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="comment"> * \section qps_allocators QPS Allocators</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="comment"> *</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="comment"> * QPS is split in two allocators. The first one is a paged allocator</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment"> * (functions qps_pg_*). This allocator returns contiguous sets of pages.</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="comment"> * Sizes are in pages (of #QPS_PAGE_SIZE octets). The allocation book-keeping</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="comment"> * is maintained externally and dumped in the QPS meta data (\p meta.qps)</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="comment"> * every now and then (TODO be a bit more specific about it).</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="comment"> *</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="comment"> * The second allocator is a TLSF (http://rtportal.upv.es/rtmalloc/)</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="comment"> * allocator. Like in TLSF the allocation book-keeping is stored inside the</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment"> * allocator itself. This allocator allocates objects smaller than</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="comment"> * #QPS_M_ALLOC_MAX and falls back to the paged allocator for larger objects</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="comment"> * transparently.</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="comment"> *</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="comment"> * QPS has a notion of handles for objects allocated with the TLSF allocator.</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="comment"> * Those are mandatory. Handles is just a boxed pointer, which allow efficient</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="comment"> * relocation of data for memory defragmentation purposes.</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="comment"> *</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment"> * \section qps_replay Opening and Creating a QPS</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="comment"> *</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="comment"> * QPS offers the functions #qps_exists, #qps_open and #qps_create.  The idiom</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="comment"> * to reopen a given QPS is often something like:</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="comment"> *</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment"> * \code</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment"> * #define QPS_PATH   &quot;/some/directory&quot;</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment"> *</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment"> * if (qps_exists(QPS_PATH)) {</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment"> *     qps = qps_open(QPS_PATH, &quot;test-qps&quot;);</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="comment"> * } else {</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="comment"> *     qps = qps_create(QPS_PATH, &quot;test-qps&quot;, 0755);</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="comment"> * }</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="comment"> * \endcode</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="comment"> *</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment"> * Given that QPS lives in a directory, those APIs don&#39;t even try to deal with</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="comment"> * data creation races (there is nothing similar to open() \a O_EXCL flag). If</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="comment"> * you need such security provided (because you create the QPS in an unsafe</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="comment"> * location), then it&#39;s up to you to ensure that the enclosing directory has</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="comment"> * been created by you with the proper permissions.</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="comment"> *</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="comment"> * \note Do remember that on NFS directory creation isn&#39;t atomic.</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="comment"> */</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span><span class="comment"></span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span><span class="comment">/** Type of a qps page handle.</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="comment"> *</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="comment"> * a #qps_pg_t is actually made of two parts:</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment"> * - the 16 most significat bits are a map index, into qps-&gt;maps</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="comment"> * - the 16 least significant bits are a page index into the map,</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment"> *   0 is reserved and doesn&#39;t point to a valid page.</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="comment"> */</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">  123</a></span><span class="keyword">typedef</span> uint32_t           <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a>;<span class="comment"></span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="comment">/** the NULL page handle */</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaf02379e1f81c8f17c4e1cdbcb45e1b22">  125</a></span><span class="preprocessor">#define QPS_PG_NULL        cast(qps_pg_t, 0)</span><span class="comment"></span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="comment">/** format to use in printf() when pretty printing a #qps_pg_t */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gacd9eba6ac1da3ffcaab95811ec141048">  127</a></span><span class="preprocessor">#define QPS_PG_FMT      &quot;%d:%04x&quot;</span><span class="comment"></span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><span class="comment">/** format argument to use in printf(), counterpart to #QPS_PG_FMT */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaf4003be6cc59aa6b6f02460ccf1f1b40">  129</a></span><span class="preprocessor">#define QPS_PG_ARG(pg)  ((pg) &gt;&gt; 16), ((pg) &amp; 0xffff)</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span><span class="comment"></span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="comment">/** Type of a qps memory handle.</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span><span class="comment"> *</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="comment"> * a #qps_handle_t is actually a boxed relocatable pointer (#qps_ptr_t).</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="comment"> */</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">  135</a></span><span class="keyword">typedef</span> uint32_t <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a>;<span class="comment"></span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span><span class="comment">/** The NULL qps handle */</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga952491baa9d441aa217cf1416d6b80aa">  137</a></span><span class="preprocessor">#define QPS_HANDLE_NULL   0U</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span><span class="comment"></span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="comment">/** Type of a qps generic relocatable pointer */</span></div>
<div class="foldopen" id="foldopen00140" data-start="{" data-end="};">
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno"><a class="line" href="../../dc/da4/structqps__ptr__t.html">  140</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../dc/da4/structqps__ptr__t.html">qps_ptr_t</a> {<span class="comment"></span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="comment">    /** offset in the page, should be in [0 .. #QPS_PAGE_SIZE[ */</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="../../dc/da4/structqps__ptr__t.html#ac33adf501073d78521e2f1bd38477416">  142</a></span>    uint32_t <a class="code hl_variable" href="../../dc/da4/structqps__ptr__t.html#ac33adf501073d78521e2f1bd38477416">addr</a>;<span class="comment"></span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="comment">    /** page the pointer points into.</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span><span class="comment">     * When this field is NULL, the pointer is invalid.</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span><span class="comment">     */</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno"><a class="line" href="../../dc/da4/structqps__ptr__t.html#a75aafa84ac9d39fb86a15fa3b59e76f1">  146</a></span>    <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> <a class="code hl_variable" href="../../dc/da4/structqps__ptr__t.html#a75aafa84ac9d39fb86a15fa3b59e76f1">pgno</a>;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga720ab0d55a369e1a5bd945181ccdb73f">  147</a></span>} <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga720ab0d55a369e1a5bd945181ccdb73f">qps_ptr_t</a>;<span class="comment"></span></div>
</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="comment">/** format to use in printf() when pretty printing a #qps_ptr_t */</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga9722c8b0c5580711a66d244f0d75ccb6">  149</a></span><span class="preprocessor">#define QPS_PTR_FMT     &quot;%d:%04x:%08x&quot;</span><span class="comment"></span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span><span class="comment">/** format argument to use in printf(), counterpart to #QPS_PTR_FMT */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga9f14e69cad97a603c84241727f6d47af">  151</a></span><span class="preprocessor">#define QPS_PTR_ARG(p)  QPS_PG_ARG((p).pgno), (p).addr</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span><span class="comment"></span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span><span class="comment">/** Type for caching the result of the dereferencement of a handle.</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00155" data-start="{" data-end="};">
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno"><a class="line" href="../../d4/d17/structqps__hptr__t.html">  155</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d4/d17/structqps__hptr__t.html">qps_hptr_t</a> {</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">  156</a></span>    <span class="keywordtype">void</span>        *<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a>;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="../../d4/d17/structqps__hptr__t.html#a25e53c9af5970f07f99af0df68f27045">  157</a></span>    uint32_t     <a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#a25e53c9af5970f07f99af0df68f27045">gc_gen</a>;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">  158</a></span>    <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> <a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">handle</a>;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga3146a7366b9789ad78fae888488b2c29">  159</a></span>} <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga3146a7366b9789ad78fae888488b2c29">qps_hptr_t</a>;</div>
</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="comment">/* qps types, public for inlining reasons {{{ */</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga16ab0ef496f3e3a0705a61ee69bbf8b6">  163</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d2/dd8/structqps__pghdr__t.html">qps_pghdr_t</a>  <a class="code hl_struct" href="../../d2/dd8/structqps__pghdr__t.html">qps_pghdr_t</a>;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaab3464fb3099b1e609e646d70b6be522">  164</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#gaab3464fb3099b1e609e646d70b6be522">qps_cowhdr_t</a> <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#gaab3464fb3099b1e609e646d70b6be522">qps_cowhdr_t</a>;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gad9e6cd09488c14107af0e38c750605b6">  165</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../dd/d7c/structqps__mhdr__t.html">qps_mhdr_t</a>   <a class="code hl_struct" href="../../dd/d7c/structqps__mhdr__t.html">qps_mhdr_t</a>;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gab725061542548fdae8d93701549c9d17">  166</a></span><span class="keyword">typedef</span> <span class="keyword">union  </span><a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a>    <a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a>;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga2822bad665b409bb8b38733ac547af58">  167</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d4/d51/structqps__gcmap__t.html">qps_gcmap_t</a>  <a class="code hl_struct" href="../../d4/d51/structqps__gcmap__t.html">qps_gcmap_t</a>;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gac849db2209c5a9033e719425cdcca008">  168</a></span><a class="code hl_define" href="../../d1/d77/container-qvector_8h.html#a85adcc8bd074b72e19ecbaa61da232a7">qvector_t</a>(qps_handle, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a>);</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gafa2521cc4ecf121f25a99d248f25f694">  169</a></span><a class="code hl_define" href="../../d1/d77/container-qvector_8h.html#a85adcc8bd074b72e19ecbaa61da232a7">qvector_t</a>(qps_pg,     <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a>);</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga8526bfb3e26803abc8f259037f95256c">  170</a></span><a class="code hl_define" href="../../d1/d77/container-qvector_8h.html#a85adcc8bd074b72e19ecbaa61da232a7">qvector_t</a>(qpsm,       <a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a> *);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="foldopen" id="foldopen00172" data-start="{" data-end="}">
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga77aba91d169cfcae37f9f97533be176e">  172</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga77aba91d169cfcae37f9f97533be176e">qps_gen_cmp</a>(uint32_t gen1, uint32_t gen2)</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>{</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keywordflow">return</span> ((<span class="keywordtype">int</span>)(gen1 - gen2));</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>}</div>
</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="comment"></span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="comment">/** Compares two QPS generations together.</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="comment"> * \param gen1  lhs of the comparison</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="comment"> * \param gen2  rhs of the comparison</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span><span class="comment"> * \param op    the comparison to perform, one of &lt;, &lt;=, ==, &gt;=, &gt;</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span><span class="comment"> * \return      the result of the comparison (bool)</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="comment"> */</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga346a76a1a0d6bc9bc2d759d42ffb41ee">  183</a></span><span class="preprocessor">#define QPS_GEN_CMP(gen1, op, gen2)  (qps_gen_cmp(gen1, gen2) op 0)</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="foldopen" id="foldopen00185" data-start="{" data-end="};">
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html">  185</a></span><span class="keyword">union </span><a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a> {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a31834aac91191f1aeb6737db047c8e61">  186</a></span><span class="preprocessor">#define QPS_PAGE_SHIFT   12UL</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a98c139d059f105851911e3ff48440449">  187</a></span><span class="preprocessor">#define QPS_PAGE_SIZE    (1UL &lt;&lt; QPS_PAGE_SHIFT)</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a7b052ecc86c212a8246f8e7eb7624009">  188</a></span><span class="preprocessor">#define QPS_PAGE_MASK    (QPS_PAGE_SIZE - 1)</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a5c7569d6a4e181264cbc12b1a86bad64">  190</a></span><span class="preprocessor">#define QPS_MAP_PAGES    (1UL &lt;&lt; 16)</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a1e15e7e365bd45710a1403cc63b115f1">  191</a></span><span class="preprocessor">#define QPS_MAP_SHIFT    (16UL + QPS_PAGE_SHIFT)</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a4a106b4292f650eb3f3d8c81caaa747e">  192</a></span><span class="preprocessor">#define QPS_MAP_SIZE     (1UL &lt;&lt; QPS_MAP_SHIFT)</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a8e55ef18b951e0a2fe1b9c060028ebfc">  193</a></span><span class="preprocessor">#define QPS_MAP_MASK     (QPS_MAP_SIZE - 1)</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="keyword">struct </span>{</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a7cd5445e2e588d8c6ba7cdf2557b742d">  196</a></span><span class="preprocessor">#define QPS_META_SIG     &quot;QPS_meta/v01.00&quot;</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a04533ae65d6ed3ea9baf1ac79a57a593">  197</a></span><span class="preprocessor">#define QPS_MAP_PG_SIG   &quot;QPS_page/v01.00&quot;</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a705f2fb4b51d7d9b28ded99efba68e57">  198</a></span><span class="preprocessor">#define QPS_MAP_MEM_SIG  &quot;QPS_tlsf/v01.00&quot;</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#a3e4904cad62f029645e37190e5e13e6e">  199</a></span>        uint8_t         <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a3e4904cad62f029645e37190e5e13e6e">sig</a>[16];</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#a537ce2732ce4af6326b8ac4c0fc43d6b">  200</a></span>        uint32_t        <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a537ce2732ce4af6326b8ac4c0fc43d6b">mapno</a>;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#ac6a5be6c2e01ecdedbd6fb5d6bcece45">  201</a></span>        uint32_t        <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#ac6a5be6c2e01ecdedbd6fb5d6bcece45">generation</a>;</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#aeb7a4b64029eba224adc2a76f3b57708">  202</a></span>        uint32_t        <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#aeb7a4b64029eba224adc2a76f3b57708">allocated</a>;</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#a30efa5bf64ad2e523dd9e444e2ca6300">  203</a></span>        uint8_t         <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a30efa5bf64ad2e523dd9e444e2ca6300">__padding</a>[<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a98c139d059f105851911e3ff48440449">QPS_PAGE_SIZE</a> / 2 - 16 - 3 * 4];</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span> </div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        <span class="comment">/* Past this point, data on disk may be corrupted */</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#a14692b432d1ea84ed557853e0bf5a1f2">  206</a></span>        <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a>   *<a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a14692b432d1ea84ed557853e0bf5a1f2">qps</a>;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#aed3fcb60d33fc230bbac842de790703c">  207</a></span>        uint32_t        <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#aed3fcb60d33fc230bbac842de790703c">remaining</a>;      <span class="comment">/* only for memory */</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#a13ad3abcf77e98b0c9612648185718ca">  208</a></span>        uint32_t        <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a13ad3abcf77e98b0c9612648185718ca">disk_usage</a>;     <span class="comment">/* only for memory */</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#a6008fb8a4b9e0517594e8d353c7fbfe0">  209</a></span>    } <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a6008fb8a4b9e0517594e8d353c7fbfe0">hdr</a>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno"><a class="line" href="../../dd/d6b/unionqps__map__t.html#a81cbff3f0636630f4f88f219eafcadbc">  210</a></span>    uint8_t <a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a81cbff3f0636630f4f88f219eafcadbc">data</a>[<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a98c139d059f105851911e3ff48440449">QPS_PAGE_SIZE</a>];</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>};</div>
</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="foldopen" id="foldopen00213" data-start="{" data-end="};">
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno"><a class="line" href="../../d4/d51/structqps__gcmap__t.html">  213</a></span><span class="keyword">struct </span><a class="code hl_struct" href="../../d4/d51/structqps__gcmap__t.html">qps_gcmap_t</a> {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno"><a class="line" href="../../d4/d51/structqps__gcmap__t.html#a4381a543fb81b61527460a52f1a35d55">  214</a></span>    <a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a> *<a class="code hl_variable" href="../../d4/d51/structqps__gcmap__t.html#a4381a543fb81b61527460a52f1a35d55">map</a>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="../../d4/d51/structqps__gcmap__t.html#a08ca2811487f52b2bc74c85582ff9c8d">  215</a></span>    uint32_t   <a class="code hl_variable" href="../../d4/d51/structqps__gcmap__t.html#a08ca2811487f52b2bc74c85582ff9c8d">mark</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno"><a class="line" href="../../d4/d51/structqps__gcmap__t.html#a982eac25173a07ffd786f100fa69aafb">  216</a></span>    uint32_t   <a class="code hl_variable" href="../../d4/d51/structqps__gcmap__t.html#a982eac25173a07ffd786f100fa69aafb">gen</a>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno"><a class="line" href="../../d4/d51/structqps__gcmap__t.html#aef04af5474ad2fe58d76e6f59f07cab5">  217</a></span>    uint32_t   <a class="code hl_variable" href="../../d4/d51/structqps__gcmap__t.html#aef04af5474ad2fe58d76e6f59f07cab5">allocated</a>;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno"><a class="line" href="../../d4/d51/structqps__gcmap__t.html#a4e8d50cb867a13b2917548cbb5d59f28">  218</a></span>    uint32_t   <a class="code hl_variable" href="../../d4/d51/structqps__gcmap__t.html#a4e8d50cb867a13b2917548cbb5d59f28">disk_usage</a>;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>};</div>
</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gacd423bf429b7becccf5b0d937f7d26a0">  220</a></span><a class="code hl_define" href="../../d1/d77/container-qvector_8h.html#a85adcc8bd074b72e19ecbaa61da232a7">qvector_t</a>(qps_gcmap, <a class="code hl_struct" href="../../d4/d51/structqps__gcmap__t.html">qps_gcmap_t</a>);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="preprocessor">#ifdef __has_blocks</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="keyword">typedef</span> void (BLOCK_CARET <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga64b752d36623be388ab4243b81f2f80b">qps_notify_b</a>)(uint32_t gen);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga64b752d36623be388ab4243b81f2f80b">  225</a></span><span class="keyword">typedef</span> <span class="keywordtype">void</span> *<a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga64b752d36623be388ab4243b81f2f80b">qps_notify_b</a>;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="foldopen" id="foldopen00228" data-start="{" data-end="};">
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html">  228</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#ace3c012914b3e8fc48697d14cd1a8333">  229</a></span>    <a class="code hl_struct" href="../../d5/d64/structlogger__t.html">logger_t</a> <a class="code hl_variable" href="../../d7/d64/structqps__t.html#ace3c012914b3e8fc48697d14cd1a8333">logger</a>;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a2e6dd3ae758c92e5f1f9e6420ff510b4">  230</a></span>    <a class="code hl_struct" href="../../d5/d64/structlogger__t.html">logger_t</a> <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a2e6dd3ae758c92e5f1f9e6420ff510b4">tracing_logger</a>;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a8fd50496878c55e2ad3cfe1d64203134">  232</a></span>    <a class="code hl_struct" href="../../d2/d3c/structdir__lock__t.html">dir_lock_t</a>   <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a8fd50496878c55e2ad3cfe1d64203134">lock</a>;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a4d176e8df0048d4067f03c7d325e0634">  233</a></span>    <span class="keywordtype">int</span>          <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a4d176e8df0048d4067f03c7d325e0634">dfd</a>;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a5620eb9eb985ade5b283400e47f77c1d">  234</a></span>    uint16_t     <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a5620eb9eb985ade5b283400e47f77c1d">snapshotting</a>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a9f55862e74caec049a4a04a94e361098">  235</a></span>    uint32_t     <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a9f55862e74caec049a4a04a94e361098">generation</a>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#aeaf3b246f8a4046b1ea2fd7db056a8fd">  236</a></span>    <a class="code hl_function" href="../../d7/d64/structqps__t.html#aeaf3b246f8a4046b1ea2fd7db056a8fd">qv_t</a>(qpsm)   maps;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a89b4a12753cb2b5d70315e9066e042f4">  237</a></span>    <a class="code hl_function" href="../../d7/d64/structqps__t.html#a89b4a12753cb2b5d70315e9066e042f4">qv_t</a>(qpsm)   smaps;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a7c2f223ad36d0080910ddab8b50c6290">  238</a></span>    <a class="code hl_function" href="../../d7/d64/structqps__t.html#a7c2f223ad36d0080910ddab8b50c6290">qv_t</a>(qpsm)   omaps;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a4f1f4defc15bc2ce0d565641f9701f62">  239</a></span>    <a class="code hl_function" href="../../d7/d64/structqps__t.html#a4f1f4defc15bc2ce0d565641f9701f62">qv_t</a>(u32)    no_free;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a886c1e25634ef0e0618ae921b514977b">  240</a></span>    <a class="code hl_function" href="../../d7/d64/structqps__t.html#a886c1e25634ef0e0618ae921b514977b">qv_t</a>(u32)    no_blocked;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#af08036ff84b4e5255b35961052101862">  241</a></span>    <a class="code hl_struct" href="../../db/ddb/structdlist__t.html">dlist_t</a>      <a class="code hl_variable" href="../../d7/d64/structqps__t.html#af08036ff84b4e5255b35961052101862">qps_link</a>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a1a0115e34f3a2c3ea2bb602b13a527f1">  243</a></span><span class="preprocessor">#define QPS_HANDLES_PAGES   (QPS_HANDLES_COUNT * sizeof(qps_ptr_t) / QPS_PAGE_SIZE)</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#ae55d99caf3c36578bad564f4340875e6">  244</a></span><span class="preprocessor">#define QPS_HANDLES_COUNT   (1U &lt;&lt; 16)</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a5712b95b39f360453e57fc085686f6e7">  245</a></span>    <a class="code hl_struct" href="../../dc/da4/structqps__ptr__t.html">qps_ptr_t</a>  **<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a5712b95b39f360453e57fc085686f6e7">handles</a>;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a12a5bd3b00947b818b72306e26314937">  246</a></span>    uint32_t     <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a12a5bd3b00947b818b72306e26314937">handles_max</a>;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a1f57ef4623a7cc63ac9ceadf239b9e02">  247</a></span>    uint32_t     <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a1f57ef4623a7cc63ac9ceadf239b9e02">handles_freelist</a>;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a18e129182a459bd72dd86b6752b59974">  248</a></span>    uint32_t     <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a18e129182a459bd72dd86b6752b59974">handles_gc_gen</a>;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="comment">/* Allocator state, private */</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a05bd2f36d0d1050c3d769750d5d50347">  251</a></span>    <a class="code hl_struct" href="../../d2/dd8/structqps__pghdr__t.html">qps_pghdr_t</a> *<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a05bd2f36d0d1050c3d769750d5d50347">hdrs</a>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a966115ccc2e281f50698d88d7667ca44">  252</a></span>    <a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a>   *<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a966115ccc2e281f50698d88d7667ca44">gc_map</a>;     <span class="comment">/* do not use, filled for the SIGBUS handler */</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a2970fff09f6f30f3a7cd6cef2d39fe70">  253</a></span>    thr_syn_t   *<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a2970fff09f6f30f3a7cd6cef2d39fe70">snapshot_syn</a>; <span class="comment">/* not owned by the qps_t */</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#adb4efe6c98c7539cc8ec74f969c1b74c">  254</a></span>    <a class="code hl_struct" href="../../d2/d74/structev__t.html">el_t</a>         <a class="code hl_variable" href="../../d7/d64/structqps__t.html#adb4efe6c98c7539cc8ec74f969c1b74c">snap_el</a>;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a58ea0ab64844f95b3017d9f5e8484dd9">  255</a></span>    <a class="code hl_struct" href="../../d2/d74/structev__t.html">el_t</a>         <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a58ea0ab64844f95b3017d9f5e8484dd9">snap_timer_el</a>;</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a3aac99eb06b19d10b39baa60324873ec">  256</a></span>    <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga64b752d36623be388ab4243b81f2f80b">qps_notify_b</a> <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a3aac99eb06b19d10b39baa60324873ec">snap_notify</a>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#ac24bce48421303eea528dbd0e028287e">  257</a></span>    pid_t        <a class="code hl_variable" href="../../d7/d64/structqps__t.html#ac24bce48421303eea528dbd0e028287e">snap_pid</a>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a50f8bbdd5cadb04d53f4e7da9c5d44ff">  258</a></span>    <span class="keyword">struct </span>timeval <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a50f8bbdd5cadb04d53f4e7da9c5d44ff">snap_start</a>;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#aea8c11fa421020ae7f441510c7a797c5">  259</a></span>    uint32_t     <a class="code hl_variable" href="../../d7/d64/structqps__t.html#aea8c11fa421020ae7f441510c7a797c5">snap_gen</a>;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a495ac8ed8866f3c16cbad73dc8a54063">  260</a></span>    uint32_t     <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a495ac8ed8866f3c16cbad73dc8a54063">snap_max_duration</a>; <span class="comment">/* in seconds, 3600 by default */</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="keyword">struct </span>{</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a422be3129a82a7bc02b536baa4bb4120">  263</a></span><span class="preprocessor">#define QPS_PGL2_SHIFT       5U</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a961d58b912f6d166ceeee08c40884e37">  264</a></span><span class="preprocessor">#define QPS_PGL2_LEVELS      bitsizeof(uint32_t)</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a6dc664c0d4be16ca82ca864d4db4a5cc">  265</a></span><span class="preprocessor">#define QPS_PGL1_LEVELS      (16UL - QPS_PGL2_SHIFT + 1)</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a39581d995a741a427a18108e704cb304">  266</a></span>        uint32_t    <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a39581d995a741a427a18108e704cb304">l1_bitmap</a>;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a07ef1acc88b6e884a886bbedd12c29b8">  267</a></span>        uint32_t    l2_bitmap[<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a6dc664c0d4be16ca82ca864d4db4a5cc">QPS_PGL1_LEVELS</a>];</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#ac828d407275a53ab508e37d97f0c2915">  268</a></span>        <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a>    <a class="code hl_variable" href="../../dc/d4b/qpage_8c.html#a9e0333f30c3ff0bc6fafc48091baeb3a">blks</a>[<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a6dc664c0d4be16ca82ca864d4db4a5cc">QPS_PGL1_LEVELS</a>][<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a961d58b912f6d166ceeee08c40884e37">QPS_PGL2_LEVELS</a>];</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a9fb2669703cf14cfb361f9a877f5e7f6">  269</a></span>    } <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a9fb2669703cf14cfb361f9a877f5e7f6">pgs</a>;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <span class="keyword">struct </span>{</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a8a51b5a5fbe42e7ddc79dccd471077aa">  272</a></span><span class="preprocessor">#define QPS_ML2_OFFSET       3U</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#acbb25b5fe63afc4c46008c6daa85a6d9">  273</a></span><span class="preprocessor">#define QPS_ML2_SHIFT        5U</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#af29239ab3f99609da95b2fe55167c73e">  274</a></span><span class="preprocessor">#define QPS_ML2_LEVELS       bitsizeof(uint32_t)</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno"><a class="line" href="../../d2/d4d/qps_8h.html#a3e63992eca30608dd8f4ee031e96ca4a">  275</a></span><span class="preprocessor">#define QPS_ML1_LEVELS       (QPS_MAP_SHIFT + 1 - QPS_ML2_SHIFT - QPS_ML2_OFFSET)</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        uint32_t    <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a39581d995a741a427a18108e704cb304">l1_bitmap</a>;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        uint32_t    <a class="code hl_variable" href="../../d7/d64/structqps__t.html#a07ef1acc88b6e884a886bbedd12c29b8">l2_bitmap</a>[<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a3e63992eca30608dd8f4ee031e96ca4a">QPS_ML1_LEVELS</a>];</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#a08f4df522b5707ac25f31fe236f8f7da">  278</a></span>        <a class="code hl_struct" href="../../dd/d7c/structqps__mhdr__t.html">qps_mhdr_t</a> *<a class="code hl_variable" href="../../d7/d64/structqps__t.html#ac828d407275a53ab508e37d97f0c2915">blks</a>[<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a3e63992eca30608dd8f4ee031e96ca4a">QPS_ML1_LEVELS</a>][<a class="code hl_define" href="../../d2/d4d/qps_8h.html#af29239ab3f99609da95b2fe55167c73e">QPS_ML2_LEVELS</a>];</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno"><a class="line" href="../../d7/d64/structqps__t.html#af340841bb91d6a1ef100222c1aff9c66">  279</a></span>    } <a class="code hl_variable" href="../../d7/d64/structqps__t.html#af340841bb91d6a1ef100222c1aff9c66">m</a>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaf6c2f1ceaf895ccd77c299415a92d666">  280</a></span>} <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#gaf6c2f1ceaf895ccd77c299415a92d666">qps_t</a>;</div>
</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaec23f9f4a57f8716e9db521b777657d1">  282</a></span><a class="code hl_define" href="../../d7/d26/group__generic__macros.html#ga9567d22d830067dbddf74df8d6b98395">__attribute__</a>((noreturn))</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga951a98f1e2d69ca61adcd53c0f8faca3">  283</a></span>extern <span class="keywordtype">void</span> <a class="code hl_function" href="../../d0/df7/qps_8blk.html#a9ec5ba963ccf8d1398483c60d7b03412">qps_enospc</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *<a class="code hl_define" href="../../d7/d26/group__generic__macros.html#ga02648067ad66739ed70a10195891098a">nullable</a> qps, const <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../d4/d36/group__qkv____ll____qps.html#ga951a98f1e2d69ca61adcd53c0f8faca3">what</a>);</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="comment">/* }}} */</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="comment">/* qps: file-system/persistent store handling {{{ */</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span> </div>
<div class="foldopen" id="foldopen00288" data-start="{" data-end="};">
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno"><a class="line" href="../../d8/de0/structqps__stats.html">  288</a></span>struct <a class="code hl_struct" href="../../d8/de0/structqps__stats.html">qps_stats</a> {</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno"><a class="line" href="../../d8/de0/structqps__stats.html#a4c2459e7f1c320319813efba7119d028">  289</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../d8/de0/structqps__stats.html#a4c2459e7f1c320319813efba7119d028">n_maps</a>;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno"><a class="line" href="../../d8/de0/structqps__stats.html#a0378487d2b545b91742aac77710f81d8">  290</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../d8/de0/structqps__stats.html#a0378487d2b545b91742aac77710f81d8">n_pages</a>;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno"><a class="line" href="../../d8/de0/structqps__stats.html#a19884f62114c32035899f9070a8d7177">  291</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../d8/de0/structqps__stats.html#a19884f62114c32035899f9070a8d7177">ro_allocs</a>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno"><a class="line" href="../../d8/de0/structqps__stats.html#a435973aa2eccf6a919b1f2fa33b0d3ab">  292</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../d8/de0/structqps__stats.html#a435973aa2eccf6a919b1f2fa33b0d3ab">rw_allocs</a>;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno"><a class="line" href="../../d8/de0/structqps__stats.html#ad21a358f461bdb909b10c5384f823957">  293</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../d8/de0/structqps__stats.html#ad21a358f461bdb909b10c5384f823957">n_pages_free</a>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno"><a class="line" href="../../d8/de0/structqps__stats.html#a8734da8d2287db073c03d2d65fa71858">  294</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d8/de0/structqps__stats.html#a8734da8d2287db073c03d2d65fa71858">pages</a>;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno"><a class="line" href="../../d8/de0/structqps__stats.html#a9c81cb6cfb60c1c62df5f15df0000e30">  295</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d8/de0/structqps__stats.html#a9c81cb6cfb60c1c62df5f15df0000e30">pages_free</a>;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>};</div>
</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a>    *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga0d8bcc972fdb8b3cac760318950d3f38">qps_create</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../d3/d40/iop_8h.html#aeb9848b789525ca1c6a3ae20f0cff40a">name</a>, mode_t mode,</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>                     <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> dlen);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span> </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span><a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a>    *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga7fcf8c35ae2a77fdc10451bbddbf423c">_qps_open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../d3/d40/iop_8h.html#aeb9848b789525ca1c6a3ae20f0cff40a">name</a>,</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>                    <span class="keywordtype">bool</span> load_whole_spool, <a class="code hl_struct" href="../../d8/d4d/structsb__t.html">sb_t</a> *priv);</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga6be4cfb9cc13730d385cd24065e72c10">  303</a></span><span class="preprocessor">#define qps_open(path, name, priv)  _qps_open((path), (name), true, (priv))</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span><span class="keywordtype">int</span>       <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga286e9176847ddee51c7ca8c813d54233">__qps_check_consistency</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../d3/d40/iop_8h.html#aeb9848b789525ca1c6a3ae20f0cff40a">name</a>);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="keywordtype">int</span>       <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga2f14a567d9cc7e2b3ba462cd0c588054">__qps_check_maps</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keywordtype">bool</span> fatal);</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="keywordtype">bool</span>      <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gaa43f493a21afb34832c461e9550a1702">qps_exists</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path);</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="keywordtype">int</span>       <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gaf6b2d3117a0f9e1563868fa25403c6d7">qps_unlink</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *path);</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="keywordtype">void</span>      <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga958e17dd9a04754517c8548d61524c45">qps_close</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> **qps);</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="keywordtype">void</span>      <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gac1fe9b48ef3ff2dee763e954d1c51cea">qps_get_usage</a>(<span class="keyword">const</span> <a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keyword">struct</span> <a class="code hl_struct" href="../../d8/de0/structqps__stats.html">qps_stats</a> *);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span><span class="preprocessor">#ifdef __has_blocks</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>uint32_t  <a class="code hl_function" href="../../d0/df7/qps_8blk.html#a913ee1fd5c281f44c36b47e9c7bfd7dd">qps_snapshot</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> dlen,</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                       <span class="keywordtype">void</span> (BLOCK_CARET notify)(uint32_t gen));</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span><span class="comment"></span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span><span class="comment">/** Set a thr syn to use for thr jobs that should synchronize with the</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span><span class="comment"> * snapshots.</span></div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span><span class="comment"> *</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span><span class="comment"> * When set, this syn is awaited before ending a snapshot.</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="comment"> *</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span><span class="comment"> * Can be used for example if you want to spare CPU time in the main thread</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="comment"> * because of a big operation, but the operation has to be completed before</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span><span class="comment"> * the end of a potential snapshot:</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span><span class="comment"> *</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span><span class="comment"> * &gt; qps_set_snapshot_syn(my_qps, my_syn);</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span><span class="comment"> * &gt; thr_syn_queue_b(my_syn, _G.my_queue, ^{</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span><span class="comment"> * &gt;     // big operation</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span><span class="comment"> * &gt; });</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span><span class="comment"> */</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga2704dbb54750eeffaf6c9a447285df7b">qps_set_snapshot_syn</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, thr_syn_t *<a class="code hl_variable" href="../../dc/d4b/thr-job_8blk.html#a4136e2ce9c302f15b3f7a470e6a665bb">syn</a>);</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span><span class="comment"></span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span><span class="comment">/** Backup a qps.</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span><span class="comment"> * This function shall not be called during a snapshot.</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span><span class="comment"> *</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span><span class="comment"> * /param[in] dfd_dst       a descriptor on the destination directory.</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><span class="comment"> * /param[in] link_as_copy  if true do a hard link rather than a copy.</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span><span class="comment"> *</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span><span class="comment"> * /return 0   if OK</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span><span class="comment"> *         -1  error with arguments</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span><span class="comment"> *         -2  call while snapshotting</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span><span class="comment"> *         -3  error on source</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span><span class="comment"> *         -4  error on destination</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span><span class="comment"> */</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span><span class="keywordtype">int</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga66f4a207aba86bd5d01e90cc05b1b616">qps_backup</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keywordtype">int</span> dfd_dst, <span class="keywordtype">bool</span> link_as_copy);</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span> </div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span><span class="comment">/* TODO Document what the QPS handle garbage collector actually does and how.</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span><span class="comment"> */</span><span class="comment"></span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="comment">/** Run the QPS handle garbage collector.</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span><span class="comment"> *</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span><span class="comment"> * Can only be run from main thread otherwise the call will have no effect.</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="comment"> *</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="comment"> * \warning it&#39;s invalid to run the GC while a snapshot is going on!</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span><span class="comment"> */</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga326bd1d01f68fcf553e88bea40d68a5f">qps_gc_run</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps);</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span> </div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga9c886707978c7b09cb5e0cca7752bf00">qps_snapshot_wait</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps);</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span><span class="comment">/* }}} */</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span><span class="comment">/* qps: Allocation routines {{{ */</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="comment"></span> </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="comment">/** Maximum amount of memory allocated inside the tlsf pool */</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga63ea2d33f9f9f72e0fddb9fa529f5699">  363</a></span><span class="preprocessor">#define QPS_M_ALLOC_MAX   (64U &lt;&lt; 10)</span><span class="comment"></span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span><span class="comment">/** Largest amount of memory QPS can allocate */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaaf0f8a552957b79af2afbb397163ace3">  365</a></span><span class="preprocessor">#define QPS_ALLOC_MAX     (32U &lt;&lt; 20)</span><span class="comment"></span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span><span class="comment">/** Smallest amount of memory QPS will alloc */</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga0131c5215ba2ceb02f2b02d71e604b7d">  367</a></span><span class="preprocessor">#define QPS_ALLOC_MIN     (24)</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span><span class="comment"></span> </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span><span class="comment">/**</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span><span class="comment"> * XXX map/alloc/remap/realloc do *NOT* zero memory</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span><span class="comment"> *</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span><span class="comment"> * @param [n] number of manipulated page (each of size QPS_PAGE_SIZE)</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span><span class="comment"> */</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span><a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a>  <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga7851ba447412ca4488d47e143f8388b4">qps_pg_map</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keywordtype">size_t</span> <a class="code hl_define" href="../../d4/d9a/str-conv_8c.html#ad5228cd48403ef9d8b632f5c7c124720">n</a>);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span><a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a>  <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gae7aa60472979ff77d332c91947473165">qps_pg_remap</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> blk, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span><span class="keywordtype">void</span>      <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gacc11dd3278839c2f5a41375d3b71b926">qps_pg_unmap</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> blk);</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span><span class="keywordtype">void</span>      <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga2ff8ce4415c744bb33dc94e16f35de2b">qps_pg_unload</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> blk);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span><span class="keywordtype">size_t</span>    <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga81b0b7f5cae410bf8575e80851f20b91">qps_pg_sizeof</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> blk);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span><span class="keywordtype">void</span>      <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga0fec48de1015725e0da9ccac5eebedc0">qps_pg_zero</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> blk, <span class="keywordtype">size_t</span> <a class="code hl_define" href="../../d4/d9a/str-conv_8c.html#ad5228cd48403ef9d8b632f5c7c124720">n</a>);</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span><span class="keywordtype">void</span>     *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga45a711663f36a77a78d1166a562d5fe5">qps_alloc</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> *<span class="keywordtype">id</span>, <span class="keywordtype">size_t</span> size);<span class="comment"></span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span><span class="comment">/** Reallocs the memory behind a handle.</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span><span class="comment"> * \warning unlike realloc(), qps_realloc(qps, id, 0) won&#39;t free the handle,</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span><span class="comment"> * #qps_free must still be called.</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span><span class="comment"> * \warning unlike realloc(), qps_realloc(qps, QPS_HANDLE_NULL, size) won&#39;t</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span><span class="comment"> * do an allocation, use #qps_alloc() to get the handle.</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span><span class="comment"> */</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span><span class="keywordtype">void</span>     *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gae9e62a5e0d4ea93b41601997d1f456f4">qps_realloc</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> <span class="keywordtype">id</span>, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span><span class="keywordtype">void</span>      <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gacec7174c80f02b525106311ba5da30ac">qps_free</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> <span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span><span class="keywordtype">size_t</span>    <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga398847903e36770c21db364a288e005b">qps_sizeof</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keyword">const</span> <span class="keywordtype">void</span> *ptr);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span><span class="keywordtype">void</span>      <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gad98b39b7b6872c8f378997d5f072f0f3">qps_zero</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keywordtype">void</span> *ptr, <span class="keywordtype">size_t</span> <a class="code hl_define" href="../../d4/d9a/str-conv_8c.html#ad5228cd48403ef9d8b632f5c7c124720">n</a>);</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span><span class="comment">/* }}} */</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="comment">/* qps: conversions between various kind of pointers {{{ */</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00397" data-start="{" data-end="}">
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga764bdc449f42c744648a47799fc40354">  397</a></span><a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga764bdc449f42c744648a47799fc40354">qps_map_of</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *ptr)</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>{</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#ga09955cd68a692975ea9423faafe87574">cast</a>(<a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a> *, <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#ga09955cd68a692975ea9423faafe87574">cast</a>(uintptr_t, ptr) &amp; ~<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a8e55ef18b951e0a2fe1b9c060028ebfc">QPS_MAP_MASK</a>);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>}</div>
</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00403" data-start="{" data-end="}">
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaa507338ada19859a3ba017b22d76e811">  403</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gaa507338ada19859a3ba017b22d76e811">qps_map_is_pg</a>(<span class="keyword">const</span> <a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a> *map)</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>{</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <span class="keywordflow">return</span> map-&gt;<a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a6008fb8a4b9e0517594e8d353c7fbfe0">hdr</a>.<a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a3e4904cad62f029645e37190e5e13e6e">sig</a>[4] == <span class="charliteral">&#39;p&#39;</span>;</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>}</div>
</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00409" data-start="{" data-end="}">
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaee6b9ac1432404a09192c8801d2a2d14">  409</a></span><span class="keywordtype">bool</span> <a class="code hl_define" href="../../d4/d36/group__qkv____ll____qps.html#gab00a68c715a995998ad07176c5a9eaaa">qps_is_ro</a>(<span class="keyword">const</span> <a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keyword">const</span> <a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a> *map)</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>{</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="keywordflow">return</span> !<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gaa507338ada19859a3ba017b22d76e811">qps_map_is_pg</a>(map) &amp;&amp; qps-&gt;<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a9f55862e74caec049a4a04a94e361098">generation</a> != map-&gt;<a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a6008fb8a4b9e0517594e8d353c7fbfe0">hdr</a>.<a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#ac6a5be6c2e01ecdedbd6fb5d6bcece45">generation</a>;</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>}</div>
</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span><span class="preprocessor">#ifndef __doxygen_mode__</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gab00a68c715a995998ad07176c5a9eaaa">  414</a></span><span class="preprocessor">#define qps_is_ro(qps, map)  unlikely(qps_is_ro(qps, map))</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span> </div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00418" data-start="{" data-end="}">
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga0cacf28e3b58a4dafde8dd8842d032bd">  418</a></span><a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga0cacf28e3b58a4dafde8dd8842d032bd">qps_pg_of</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *ptr_)</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>{</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    uintptr_t  ptr = <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#ga09955cd68a692975ea9423faafe87574">cast</a>(uintptr_t, ptr_);</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <a class="code hl_union" href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a> *map = <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga764bdc449f42c744648a47799fc40354">qps_map_of</a>(ptr_);</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="keywordflow">return</span> (map-&gt;<a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a6008fb8a4b9e0517594e8d353c7fbfe0">hdr</a>.<a class="code hl_variable" href="../../dd/d6b/unionqps__map__t.html#a537ce2732ce4af6326b8ac4c0fc43d6b">mapno</a> &lt;&lt; 16) | (ptr &amp; <a class="code hl_define" href="../../d2/d4d/qps_8h.html#a8e55ef18b951e0a2fe1b9c060028ebfc">QPS_MAP_MASK</a>) &gt;&gt; <a class="code hl_define" href="../../d2/d4d/qps_8h.html#a31834aac91191f1aeb6737db047c8e61">QPS_PAGE_SHIFT</a>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>}</div>
</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span><span class="comment">/* Check for broken page number. */</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00427" data-start="{" data-end="}">
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gad09f134464f4db2b0f2756bbd6a07ecf">  427</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gad09f134464f4db2b0f2756bbd6a07ecf">qps_pg_is_in_range</a>(<span class="keyword">const</span> <a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> pg)</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>{</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="keywordtype">int</span> idx = pg &gt;&gt; 16;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    <span class="keywordflow">return</span> idx &lt; qps-&gt;maps.len;</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>}</div>
</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00434" data-start="{" data-end="}">
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga84180dfcbb44d7244b1ec0b81022e09c">  434</a></span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga84180dfcbb44d7244b1ec0b81022e09c">qps_pg_deref</a>(<span class="keyword">const</span> <a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a> pg)</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>{</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    <span class="keywordflow">return</span> pg ? qps-&gt;maps.tab[pg &gt;&gt; 16][pg &amp; 0xffff].data : NULL;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>}</div>
</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span><span class="preprocessor">#if !defined(__doxygen_mode__)</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga2e774f5f921bb85417d699fcfb85d5c0">qps_w_deref_</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a>, <span class="keywordtype">void</span> *);</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00443" data-start="{" data-end="}">
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga3c5dd197e58bb2924d3a03839e2c1caa">  443</a></span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga3c5dd197e58bb2924d3a03839e2c1caa">qps_w_deref</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> <span class="keywordtype">id</span>, <span class="keywordtype">void</span> *ptr)</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>{</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="../../d4/d36/group__qkv____ll____qps.html#gab00a68c715a995998ad07176c5a9eaaa">qps_is_ro</a>(qps, <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga764bdc449f42c744648a47799fc40354">qps_map_of</a>(ptr)) ? <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga2e774f5f921bb85417d699fcfb85d5c0">qps_w_deref_</a>(qps, <span class="keywordtype">id</span>, ptr) : ptr;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>}</div>
</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span> </div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00449" data-start="{" data-end="}">
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga308fba36a1e8e39cefd304a3502fbf27">  449</a></span><a class="code hl_struct" href="../../dc/da4/structqps__ptr__t.html">qps_ptr_t</a> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga308fba36a1e8e39cefd304a3502fbf27">qps_handle_slot</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> <span class="keywordtype">id</span>)</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>{</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <a class="code hl_define" href="../../dc/d4b/qpage_8c.html#a3d4ae9c092e117c836f52dc7d7cee574">assert</a> (<span class="keywordtype">id</span> &amp;&amp; id &lt; qps-&gt;handles_max);</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    <span class="keywordflow">return</span> &amp;qps-&gt;<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a5712b95b39f360453e57fc085686f6e7">handles</a>[<span class="keywordtype">id</span> / <a class="code hl_define" href="../../d2/d4d/qps_8h.html#ae55d99caf3c36578bad564f4340875e6">QPS_HANDLES_COUNT</a>][<span class="keywordtype">id</span> % <a class="code hl_define" href="../../d2/d4d/qps_8h.html#ae55d99caf3c36578bad564f4340875e6">QPS_HANDLES_COUNT</a>];</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>}</div>
</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga7c134b98e149f056c7e16308663cc3ff">qps_handle_allow_memory</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> <span class="keywordtype">id</span>, <a class="code hl_struct" href="../../dc/da4/structqps__ptr__t.html">qps_ptr_t</a> *ptr);</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span> </div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00458" data-start="{" data-end="}">
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga0a47f47d60aa3639eeb02904b772dbf0">  458</a></span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga0a47f47d60aa3639eeb02904b772dbf0">qps_handle_deref</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> <span class="keywordtype">id</span>)</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>{</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <a class="code hl_struct" href="../../dc/da4/structqps__ptr__t.html">qps_ptr_t</a> *ptr = <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga308fba36a1e8e39cefd304a3502fbf27">qps_handle_slot</a>(qps, <span class="keywordtype">id</span>);</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    <a class="code hl_define" href="../../dc/d4b/qpage_8c.html#a3d4ae9c092e117c836f52dc7d7cee574">assert</a> ((ptr-&gt;<a class="code hl_variable" href="../../dc/da4/structqps__ptr__t.html#ac33adf501073d78521e2f1bd38477416">addr</a> &amp; ~<a class="code hl_define" href="../../d2/d4d/qps_8h.html#a7b052ecc86c212a8246f8e7eb7624009">QPS_PAGE_MASK</a>) == 0);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span><span class="preprocessor">#if QPS_USE_REDZONES</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga7c134b98e149f056c7e16308663cc3ff">qps_handle_allow_memory</a>(qps, <span class="keywordtype">id</span>, ptr);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    <span class="keywordflow">return</span> (uint8_t *)<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga84180dfcbb44d7244b1ec0b81022e09c">qps_pg_deref</a>(qps, ptr-&gt;<a class="code hl_variable" href="../../dc/da4/structqps__ptr__t.html#a75aafa84ac9d39fb86a15fa3b59e76f1">pgno</a>) + ptr-&gt;<a class="code hl_variable" href="../../dc/da4/structqps__ptr__t.html#ac33adf501073d78521e2f1bd38477416">addr</a>;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>}</div>
</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span> </div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00470" data-start="{" data-end="}">
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gae693a754c2953e592c112c2c14223be3">  470</a></span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gae693a754c2953e592c112c2c14223be3">qps_handle_w_deref</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> <span class="keywordtype">id</span>)</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>{</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga3c5dd197e58bb2924d3a03839e2c1caa">qps_w_deref</a>(qps, <span class="keywordtype">id</span>, <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga0a47f47d60aa3639eeb02904b772dbf0">qps_handle_deref</a>(qps, <span class="keywordtype">id</span>));</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>}</div>
</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span> </div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00476" data-start="{" data-end="}">
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga12922c582aa992fb1a120cfebd53b7fa">  476</a></span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga12922c582aa992fb1a120cfebd53b7fa">qps_hptr_init</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a> h, <a class="code hl_struct" href="../../d4/d17/structqps__hptr__t.html">qps_hptr_t</a> *cache)</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>{</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">handle</a> = h;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a>   = <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga0a47f47d60aa3639eeb02904b772dbf0">qps_handle_deref</a>(qps, h);</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#a25e53c9af5970f07f99af0df68f27045">gc_gen</a> = qps-&gt;<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a18e129182a459bd72dd86b6752b59974">handles_gc_gen</a>;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    <span class="keywordflow">return</span> cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a>;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>}</div>
</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span> </div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00485" data-start="{" data-end="}">
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga2d7125ef4f289943afeecf2dbcafb199">  485</a></span><span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga2d7125ef4f289943afeecf2dbcafb199">qps_hptr_deref</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_struct" href="../../d4/d17/structqps__hptr__t.html">qps_hptr_t</a> *cache)</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>{</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    <span class="keywordflow">if</span> (<a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gad8700448546b3b5111404cc021061fd5">unlikely</a>(qps-&gt;<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a18e129182a459bd72dd86b6752b59974">handles_gc_gen</a> != cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#a25e53c9af5970f07f99af0df68f27045">gc_gen</a>)) {</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>        cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a>   = <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga0a47f47d60aa3639eeb02904b772dbf0">qps_handle_deref</a>(qps, cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">handle</a>);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>        cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#a25e53c9af5970f07f99af0df68f27045">gc_gen</a> = qps-&gt;<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a18e129182a459bd72dd86b6752b59974">handles_gc_gen</a>;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    }</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    <span class="keywordflow">return</span> cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a>;</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>}</div>
</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span> </div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00495" data-start="{" data-end="}">
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gad860e8b4fa0f4a72c8faec7da29807a2">  495</a></span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gad860e8b4fa0f4a72c8faec7da29807a2">qps_hptr_w_deref</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_struct" href="../../d4/d17/structqps__hptr__t.html">qps_hptr_t</a> *cache)</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>{</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga2d7125ef4f289943afeecf2dbcafb199">qps_hptr_deref</a>(qps, cache);</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="keywordflow">return</span> cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a> = <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga3c5dd197e58bb2924d3a03839e2c1caa">qps_w_deref</a>(qps, cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">handle</a>, cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a>);</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>}</div>
</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span> </div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00502" data-start="{" data-end="}">
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga0c25d1d2115d1333cf8f182261eb7f10">  502</a></span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga0c25d1d2115d1333cf8f182261eb7f10">qps_hptr_alloc</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keywordtype">size_t</span> <a class="code hl_define" href="../../d4/d9a/str-conv_8c.html#ad5228cd48403ef9d8b632f5c7c124720">n</a>, <a class="code hl_struct" href="../../d4/d17/structqps__hptr__t.html">qps_hptr_t</a> *cache)</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>{</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#a25e53c9af5970f07f99af0df68f27045">gc_gen</a> = qps-&gt;<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a18e129182a459bd72dd86b6752b59974">handles_gc_gen</a>;</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <span class="keywordflow">return</span> cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a> = <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga45a711663f36a77a78d1166a562d5fe5">qps_alloc</a>(qps, &amp;cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">handle</a>, <a class="code hl_define" href="../../d4/d9a/str-conv_8c.html#ad5228cd48403ef9d8b632f5c7c124720">n</a>);</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>}</div>
</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00509" data-start="{" data-end="}">
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gae499098fbf61287a5e06336a283eb827">  509</a></span><span class="keywordtype">void</span> *<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gae499098fbf61287a5e06336a283eb827">qps_hptr_realloc</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <span class="keywordtype">size_t</span> <a class="code hl_define" href="../../d4/d9a/str-conv_8c.html#ad5228cd48403ef9d8b632f5c7c124720">n</a>, <a class="code hl_struct" href="../../d4/d17/structqps__hptr__t.html">qps_hptr_t</a> *cache)</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>{</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a>   = <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gad921f75ef63f0ff10d666fe0c16cc0b6">RETHROW_P</a>(<a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gae9e62a5e0d4ea93b41601997d1f456f4">qps_realloc</a>(qps, cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">handle</a>, <a class="code hl_define" href="../../d4/d9a/str-conv_8c.html#ad5228cd48403ef9d8b632f5c7c124720">n</a>));</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#a25e53c9af5970f07f99af0df68f27045">gc_gen</a> = qps-&gt;<a class="code hl_variable" href="../../d7/d64/structqps__t.html#a18e129182a459bd72dd86b6752b59974">handles_gc_gen</a>;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <span class="keywordflow">return</span> cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">data</a>;</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>}</div>
</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span><span class="keyword">static</span> <a class="code hl_define" href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div>
<div class="foldopen" id="foldopen00517" data-start="{" data-end="}">
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gac2e45abb4e1670af07565fd747ef0bad">  517</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gac2e45abb4e1670af07565fd747ef0bad">qps_hptr_free</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_struct" href="../../d4/d17/structqps__hptr__t.html">qps_hptr_t</a> *cache)</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>{</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#gacec7174c80f02b525106311ba5da30ac">qps_free</a>(qps, cache-&gt;<a class="code hl_variable" href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">handle</a>);</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    <a class="code hl_define" href="../../d9/d9a/mem_8h.html#a8273c9cb6784b3c093191196c5407689">p_clear</a>(cache, 1);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>}</div>
</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span> </div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span><span class="comment">/* }}} */</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span><span class="comment"></span> </div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span><span class="comment">/** \brief Initialize the QPS module.</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span><span class="comment"> *</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span><span class="comment"> * qps_initialize calls sigaction() to hook the SIGSEGV and SIGBUGS signal for</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span><span class="comment"> * internal processing and will forward signals caught that way that aren&#39;t</span></div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span><span class="comment"> * expected to the handler (if any). If you hook the SIGSEGV or SIGBUS signal</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span><span class="comment"> * after calling qps_initialize, the QPS handlers will be overwritten and QPS</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span><span class="comment"> * won&#39;t be functional, if you do it before, then QPS will chain them after</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span><span class="comment"> * its own sighandlers.</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span><span class="comment"> */</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaf6929874e45f024b8fe3f19999a33631">  534</a></span><a class="code hl_define" href="../../d5/d16/module_8h.html#a6766340bc93958edde664cdf1fb15b6b">MODULE_DECLARE</a>(qps);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span> </div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span><span class="comment">/* leak checker {{{ */</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="foldopen" id="foldopen00538" data-start="{" data-end="};">
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno"><a class="line" href="../../d8/de7/structqps__roots__t.html">  538</a></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/de7/structqps__roots__t.html">qps_roots_t</a> {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno"><a class="line" href="../../d8/de7/structqps__roots__t.html#a53cb016c89182ee80c25cf97400a11b1">  539</a></span>    <a class="code hl_function" href="../../d8/de7/structqps__roots__t.html#a53cb016c89182ee80c25cf97400a11b1">qv_t</a>(qps_handle) handles;</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno"><a class="line" href="../../d8/de7/structqps__roots__t.html#a1070df450e925d7866a1c5b0bda84428">  540</a></span>    <a class="code hl_function" href="../../d8/de7/structqps__roots__t.html#a1070df450e925d7866a1c5b0bda84428">qv_t</a>(qps_pg)     pages;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#gaee1e58f7eaf5356e7c893dd267db99e3">  541</a></span>} <a class="code hl_typedef" href="../../d4/d36/group__qkv____ll____qps.html#gaee1e58f7eaf5356e7c893dd267db99e3">qps_roots_t</a>;</div>
</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga41daf6e7640c57f6c59edb84ca8ecf54">  542</a></span><a class="code hl_define" href="../../d9/d9a/mem_8h.html#a307260f08d30ab055a3a8c3690064c1b">GENERIC_NEW_INIT</a>(<a class="code hl_struct" href="../../d8/de7/structqps__roots__t.html">qps_roots_t</a>, qps_roots);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span> </div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span><span class="keyword">static</span> <span class="keyword">inline</span></div>
<div class="foldopen" id="foldopen00545" data-start="{" data-end="}">
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga5546560f16f6fa6a1fdea5c8be6e276d">  545</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga5546560f16f6fa6a1fdea5c8be6e276d">qps_roots_wipe</a>(<a class="code hl_struct" href="../../d8/de7/structqps__roots__t.html">qps_roots_t</a> *roots)</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>{</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <a class="code hl_define" href="../../d1/d77/container-qvector_8h.html#a38b422843ad7b1a3bc8779cbac378e54">qv_wipe</a>(&amp;roots-&gt;handles);</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <a class="code hl_define" href="../../d1/d77/container-qvector_8h.html#a38b422843ad7b1a3bc8779cbac378e54">qv_wipe</a>(&amp;roots-&gt;pages);</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>}</div>
</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno"><a class="line" href="../../d4/d36/group__qkv____ll____qps.html#ga9aec68d83b579a7bef4c08b0c38e4120">  550</a></span><a class="code hl_define" href="../../d9/d9a/mem_8h.html#a8f02946515eaf9e344b8e1638ff561ba">GENERIC_DELETE</a>(<a class="code hl_struct" href="../../d8/de7/structqps__roots__t.html">qps_roots_t</a>, qps_roots);</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span><span class="comment"></span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span><span class="comment">/** Check QPS for pages and handles non referenced in roots.</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span><span class="comment"> *</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span><span class="comment"> * How to use it ? The user layer should list all the QPS pages and handled it</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span><span class="comment"> * uses, then call \p qps_check_leaks().</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span><span class="comment"> *</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span><span class="comment"> * \return A negative value in case of leak detection.</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span><span class="comment"> */</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span><span class="keywordtype">int</span> <a class="code hl_function" href="../../d4/d36/group__qkv____ll____qps.html#ga6a74c6a40f758ee0fef4eb8d9c2f99d0">qps_check_leaks</a>(<a class="code hl_struct" href="../../d7/d64/structqps__t.html">qps_t</a> *qps, <a class="code hl_struct" href="../../d8/de7/structqps__roots__t.html">qps_roots_t</a> *roots);</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span><span class="comment">/* }}} */</span><span class="comment"></span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span><span class="comment">/** \} */</span></div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="acontainer-qvector_8h_html_a38b422843ad7b1a3bc8779cbac378e54"><div class="ttname"><a href="../../d1/d77/container-qvector_8h.html#a38b422843ad7b1a3bc8779cbac378e54">qv_wipe</a></div><div class="ttdeci">#define qv_wipe(vec)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d77/container-qvector_8h_source.html#l00356">container-qvector.h:356</a></div></div>
<div class="ttc" id="acontainer-qvector_8h_html_a85adcc8bd074b72e19ecbaa61da232a7"><div class="ttname"><a href="../../d1/d77/container-qvector_8h.html#a85adcc8bd074b72e19ecbaa61da232a7">qvector_t</a></div><div class="ttdeci">#define qvector_t(n, val_t)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d77/container-qvector_8h_source.html#l00298">container-qvector.h:298</a></div></div>
<div class="ttc" id="agroup__generic__macros_html_ga02648067ad66739ed70a10195891098a"><div class="ttname"><a href="../../d7/d26/group__generic__macros.html#ga02648067ad66739ed70a10195891098a">nullable</a></div><div class="ttdeci">#define nullable</div><div class="ttdef"><b>Definition</b> <a href="../../da/dec/core_2macros_8h_source.html#l00074">core/macros.h:74</a></div></div>
<div class="ttc" id="agroup__generic__macros_html_ga09955cd68a692975ea9423faafe87574"><div class="ttname"><a href="../../d7/d26/group__generic__macros.html#ga09955cd68a692975ea9423faafe87574">cast</a></div><div class="ttdeci">#define cast(type, v)</div><div class="ttdef"><b>Definition</b> <a href="../../da/dec/core_2macros_8h_source.html#l00232">core/macros.h:232</a></div></div>
<div class="ttc" id="agroup__generic__macros_html_ga9567d22d830067dbddf74df8d6b98395"><div class="ttname"><a href="../../d7/d26/group__generic__macros.html#ga9567d22d830067dbddf74df8d6b98395">__attribute__</a></div><div class="ttdeci">#define __attribute__(attr)</div><div class="ttdef"><b>Definition</b> <a href="../../da/dec/core_2macros_8h_source.html#l00050">core/macros.h:50</a></div></div>
<div class="ttc" id="agroup__generic__macros_html_gaa1dec568e79152c892dcf63f445cbd7a"><div class="ttname"><a href="../../d7/d26/group__generic__macros.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div><div class="ttdeci">#define ALWAYS_INLINE</div><div class="ttdef"><b>Definition</b> <a href="../../da/dec/core_2macros_8h_source.html#l00136">core/macros.h:136</a></div></div>
<div class="ttc" id="agroup__generic__macros_html_gad8700448546b3b5111404cc021061fd5"><div class="ttname"><a href="../../d7/d26/group__generic__macros.html#gad8700448546b3b5111404cc021061fd5">unlikely</a></div><div class="ttdeci">#define unlikely(expr)</div><div class="ttdef"><b>Definition</b> <a href="../../da/dec/core_2macros_8h_source.html#l00179">core/macros.h:179</a></div></div>
<div class="ttc" id="agroup__generic__macros_html_gad921f75ef63f0ff10d666fe0c16cc0b6"><div class="ttname"><a href="../../d7/d26/group__generic__macros.html#gad921f75ef63f0ff10d666fe0c16cc0b6">RETHROW_P</a></div><div class="ttdeci">#define RETHROW_P(e)</div><div class="ttdef"><b>Definition</b> <a href="../../da/dec/core_2macros_8h_source.html#l00359">core/macros.h:359</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga01362857c888b2730feb11c7af7eb588"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga01362857c888b2730feb11c7af7eb588">qps_pg_t</a></div><div class="ttdeci">uint32_t qps_pg_t</div><div class="ttdoc">Type of a qps page handle.</div><div class="ttdef"><b>Definition</b> <a href="#l00123">qps.h:123</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga0a47f47d60aa3639eeb02904b772dbf0"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga0a47f47d60aa3639eeb02904b772dbf0">qps_handle_deref</a></div><div class="ttdeci">static ALWAYS_INLINE void * qps_handle_deref(qps_t *qps, qps_handle_t id)</div><div class="ttdef"><b>Definition</b> <a href="#l00458">qps.h:458</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga0c25d1d2115d1333cf8f182261eb7f10"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga0c25d1d2115d1333cf8f182261eb7f10">qps_hptr_alloc</a></div><div class="ttdeci">static ALWAYS_INLINE void * qps_hptr_alloc(qps_t *qps, size_t n, qps_hptr_t *cache)</div><div class="ttdef"><b>Definition</b> <a href="#l00502">qps.h:502</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga0cacf28e3b58a4dafde8dd8842d032bd"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga0cacf28e3b58a4dafde8dd8842d032bd">qps_pg_of</a></div><div class="ttdeci">static ALWAYS_INLINE qps_pg_t qps_pg_of(const void *ptr_)</div><div class="ttdef"><b>Definition</b> <a href="#l00418">qps.h:418</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga0d8bcc972fdb8b3cac760318950d3f38"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga0d8bcc972fdb8b3cac760318950d3f38">qps_create</a></div><div class="ttdeci">qps_t * qps_create(const char *path, const char *name, mode_t mode, const void *data, size_t dlen)</div><div class="ttdoc">create a qps store.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02609">qps.blk:2609</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga0fec48de1015725e0da9ccac5eebedc0"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga0fec48de1015725e0da9ccac5eebedc0">qps_pg_zero</a></div><div class="ttdeci">void qps_pg_zero(qps_t *qps, qps_pg_t blk, size_t n)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l01838">qps.blk:1838</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga12922c582aa992fb1a120cfebd53b7fa"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga12922c582aa992fb1a120cfebd53b7fa">qps_hptr_init</a></div><div class="ttdeci">static ALWAYS_INLINE void * qps_hptr_init(qps_t *qps, qps_handle_t h, qps_hptr_t *cache)</div><div class="ttdef"><b>Definition</b> <a href="#l00476">qps.h:476</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga2704dbb54750eeffaf6c9a447285df7b"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga2704dbb54750eeffaf6c9a447285df7b">qps_set_snapshot_syn</a></div><div class="ttdeci">void qps_set_snapshot_syn(qps_t *qps, thr_syn_t *syn)</div><div class="ttdoc">Set a thr syn to use for thr jobs that should synchronize with the snapshots.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l01878">qps.blk:1878</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga286e9176847ddee51c7ca8c813d54233"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga286e9176847ddee51c7ca8c813d54233">__qps_check_consistency</a></div><div class="ttdeci">int __qps_check_consistency(const char *path, const char *name)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02512">qps.blk:2512</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga2d7125ef4f289943afeecf2dbcafb199"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga2d7125ef4f289943afeecf2dbcafb199">qps_hptr_deref</a></div><div class="ttdeci">static ALWAYS_INLINE const void * qps_hptr_deref(qps_t *qps, qps_hptr_t *cache)</div><div class="ttdef"><b>Definition</b> <a href="#l00485">qps.h:485</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga2e774f5f921bb85417d699fcfb85d5c0"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga2e774f5f921bb85417d699fcfb85d5c0">qps_w_deref_</a></div><div class="ttdeci">void * qps_w_deref_(qps_t *, qps_handle_t, void *)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02387">qps.blk:2387</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga2f14a567d9cc7e2b3ba462cd0c588054"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga2f14a567d9cc7e2b3ba462cd0c588054">__qps_check_maps</a></div><div class="ttdeci">int __qps_check_maps(qps_t *qps, bool fatal)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l00688">qps.blk:688</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga2ff8ce4415c744bb33dc94e16f35de2b"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga2ff8ce4415c744bb33dc94e16f35de2b">qps_pg_unload</a></div><div class="ttdeci">void qps_pg_unload(qps_t *qps, qps_pg_t blk)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02072">qps.blk:2072</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga308fba36a1e8e39cefd304a3502fbf27"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga308fba36a1e8e39cefd304a3502fbf27">qps_handle_slot</a></div><div class="ttdeci">static ALWAYS_INLINE qps_ptr_t * qps_handle_slot(qps_t *qps, qps_handle_t id)</div><div class="ttdef"><b>Definition</b> <a href="#l00449">qps.h:449</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga3146a7366b9789ad78fae888488b2c29"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga3146a7366b9789ad78fae888488b2c29">qps_hptr_t</a></div><div class="ttdeci">struct qps_hptr_t qps_hptr_t</div><div class="ttdoc">Type for caching the result of the dereferencement of a handle.</div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga326bd1d01f68fcf553e88bea40d68a5f"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga326bd1d01f68fcf553e88bea40d68a5f">qps_gc_run</a></div><div class="ttdeci">void qps_gc_run(qps_t *qps)</div><div class="ttdoc">Run the QPS handle garbage collector.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l01792">qps.blk:1792</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga398847903e36770c21db364a288e005b"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga398847903e36770c21db364a288e005b">qps_sizeof</a></div><div class="ttdeci">size_t qps_sizeof(qps_t *qps, const void *ptr)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l01855">qps.blk:1855</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga3c5dd197e58bb2924d3a03839e2c1caa"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga3c5dd197e58bb2924d3a03839e2c1caa">qps_w_deref</a></div><div class="ttdeci">static ALWAYS_INLINE void * qps_w_deref(qps_t *qps, qps_handle_t id, void *ptr)</div><div class="ttdef"><b>Definition</b> <a href="#l00443">qps.h:443</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga45a711663f36a77a78d1166a562d5fe5"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga45a711663f36a77a78d1166a562d5fe5">qps_alloc</a></div><div class="ttdeci">void * qps_alloc(qps_t *qps, qps_handle_t *id, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02342">qps.blk:2342</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga5546560f16f6fa6a1fdea5c8be6e276d"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga5546560f16f6fa6a1fdea5c8be6e276d">qps_roots_wipe</a></div><div class="ttdeci">static void qps_roots_wipe(qps_roots_t *roots)</div><div class="ttdef"><b>Definition</b> <a href="#l00545">qps.h:545</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga64b752d36623be388ab4243b81f2f80b"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga64b752d36623be388ab4243b81f2f80b">qps_notify_b</a></div><div class="ttdeci">void * qps_notify_b</div><div class="ttdef"><b>Definition</b> <a href="#l00225">qps.h:225</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga66f4a207aba86bd5d01e90cc05b1b616"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga66f4a207aba86bd5d01e90cc05b1b616">qps_backup</a></div><div class="ttdeci">int qps_backup(qps_t *qps, int dfd_dst, bool link_as_copy)</div><div class="ttdoc">Backup a qps.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02975">qps.blk:2975</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga6a74c6a40f758ee0fef4eb8d9c2f99d0"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga6a74c6a40f758ee0fef4eb8d9c2f99d0">qps_check_leaks</a></div><div class="ttdeci">int qps_check_leaks(qps_t *qps, qps_roots_t *roots)</div><div class="ttdoc">Check QPS for pages and handles non referenced in roots.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l03223">qps.blk:3223</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga720ab0d55a369e1a5bd945181ccdb73f"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga720ab0d55a369e1a5bd945181ccdb73f">qps_ptr_t</a></div><div class="ttdeci">struct qps_ptr_t qps_ptr_t</div><div class="ttdoc">Type of a qps generic relocatable pointer.</div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga764bdc449f42c744648a47799fc40354"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga764bdc449f42c744648a47799fc40354">qps_map_of</a></div><div class="ttdeci">static ALWAYS_INLINE qps_map_t * qps_map_of(const void *ptr)</div><div class="ttdef"><b>Definition</b> <a href="#l00397">qps.h:397</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga77aba91d169cfcae37f9f97533be176e"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga77aba91d169cfcae37f9f97533be176e">qps_gen_cmp</a></div><div class="ttdeci">static int qps_gen_cmp(uint32_t gen1, uint32_t gen2)</div><div class="ttdef"><b>Definition</b> <a href="#l00172">qps.h:172</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga7851ba447412ca4488d47e143f8388b4"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga7851ba447412ca4488d47e143f8388b4">qps_pg_map</a></div><div class="ttdeci">qps_pg_t qps_pg_map(qps_t *qps, size_t n)</div><div class="ttdoc">XXX map/alloc/remap/realloc do NOT zero memory.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02034">qps.blk:2034</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga7c134b98e149f056c7e16308663cc3ff"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga7c134b98e149f056c7e16308663cc3ff">qps_handle_allow_memory</a></div><div class="ttdeci">void qps_handle_allow_memory(qps_t *qps, qps_handle_t id, qps_ptr_t *ptr)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l01865">qps.blk:1865</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga7dad0ba8c1d85b77407b28d48b5997de"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga7dad0ba8c1d85b77407b28d48b5997de">qps_handle_t</a></div><div class="ttdeci">uint32_t qps_handle_t</div><div class="ttdoc">Type of a qps memory handle.</div><div class="ttdef"><b>Definition</b> <a href="#l00135">qps.h:135</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga7fcf8c35ae2a77fdc10451bbddbf423c"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga7fcf8c35ae2a77fdc10451bbddbf423c">_qps_open</a></div><div class="ttdeci">qps_t * _qps_open(const char *path, const char *name, bool load_whole_spool, sb_t *priv)</div><div class="ttdoc">open a qps store.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02463">qps.blk:2463</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga81b0b7f5cae410bf8575e80851f20b91"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga81b0b7f5cae410bf8575e80851f20b91">qps_pg_sizeof</a></div><div class="ttdeci">size_t qps_pg_sizeof(qps_t *qps, qps_pg_t blk)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l01850">qps.blk:1850</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga84180dfcbb44d7244b1ec0b81022e09c"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga84180dfcbb44d7244b1ec0b81022e09c">qps_pg_deref</a></div><div class="ttdeci">static ALWAYS_INLINE void * qps_pg_deref(const qps_t *qps, qps_pg_t pg)</div><div class="ttdef"><b>Definition</b> <a href="#l00434">qps.h:434</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga951a98f1e2d69ca61adcd53c0f8faca3"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga951a98f1e2d69ca61adcd53c0f8faca3">what</a></div><div class="ttdeci">const char * what</div><div class="ttdef"><b>Definition</b> <a href="#l00283">qps.h:283</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga958e17dd9a04754517c8548d61524c45"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga958e17dd9a04754517c8548d61524c45">qps_close</a></div><div class="ttdeci">void qps_close(qps_t **qps)</div><div class="ttdoc">close an allocated qps object.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l03129">qps.blk:3129</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_ga9c886707978c7b09cb5e0cca7752bf00"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#ga9c886707978c7b09cb5e0cca7752bf00">qps_snapshot_wait</a></div><div class="ttdeci">void qps_snapshot_wait(qps_t *qps)</div><div class="ttdoc">Wait until an ongoing synchronization is done and notified.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02920">qps.blk:2920</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gaa43f493a21afb34832c461e9550a1702"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gaa43f493a21afb34832c461e9550a1702">qps_exists</a></div><div class="ttdeci">bool qps_exists(const char *path)</div><div class="ttdoc">check if the given directory seems to hold a qps store.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02547">qps.blk:2547</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gaa507338ada19859a3ba017b22d76e811"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gaa507338ada19859a3ba017b22d76e811">qps_map_is_pg</a></div><div class="ttdeci">static ALWAYS_INLINE bool qps_map_is_pg(const qps_map_t *map)</div><div class="ttdef"><b>Definition</b> <a href="#l00403">qps.h:403</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gaab3464fb3099b1e609e646d70b6be522"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gaab3464fb3099b1e609e646d70b6be522">qps_cowhdr_t</a></div><div class="ttdeci">struct qps_cowhdr_t qps_cowhdr_t</div><div class="ttdef"><b>Definition</b> <a href="#l00164">qps.h:164</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gab00a68c715a995998ad07176c5a9eaaa"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gab00a68c715a995998ad07176c5a9eaaa">qps_is_ro</a></div><div class="ttdeci">#define qps_is_ro(qps, map)</div><div class="ttdef"><b>Definition</b> <a href="#l00414">qps.h:414</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gac1fe9b48ef3ff2dee763e954d1c51cea"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gac1fe9b48ef3ff2dee763e954d1c51cea">qps_get_usage</a></div><div class="ttdeci">void qps_get_usage(const qps_t *qps, struct qps_stats *)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l03281">qps.blk:3281</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gac2e45abb4e1670af07565fd747ef0bad"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gac2e45abb4e1670af07565fd747ef0bad">qps_hptr_free</a></div><div class="ttdeci">static ALWAYS_INLINE void qps_hptr_free(qps_t *qps, qps_hptr_t *cache)</div><div class="ttdef"><b>Definition</b> <a href="#l00517">qps.h:517</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gacc11dd3278839c2f5a41375d3b71b926"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gacc11dd3278839c2f5a41375d3b71b926">qps_pg_unmap</a></div><div class="ttdeci">void qps_pg_unmap(qps_t *qps, qps_pg_t blk)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02065">qps.blk:2065</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gacec7174c80f02b525106311ba5da30ac"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gacec7174c80f02b525106311ba5da30ac">qps_free</a></div><div class="ttdeci">void qps_free(qps_t *qps, qps_handle_t id)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02375">qps.blk:2375</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gad09f134464f4db2b0f2756bbd6a07ecf"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gad09f134464f4db2b0f2756bbd6a07ecf">qps_pg_is_in_range</a></div><div class="ttdeci">static ALWAYS_INLINE bool qps_pg_is_in_range(const qps_t *qps, qps_pg_t pg)</div><div class="ttdef"><b>Definition</b> <a href="#l00427">qps.h:427</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gad860e8b4fa0f4a72c8faec7da29807a2"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gad860e8b4fa0f4a72c8faec7da29807a2">qps_hptr_w_deref</a></div><div class="ttdeci">static ALWAYS_INLINE void * qps_hptr_w_deref(qps_t *qps, qps_hptr_t *cache)</div><div class="ttdef"><b>Definition</b> <a href="#l00495">qps.h:495</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gad98b39b7b6872c8f378997d5f072f0f3"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gad98b39b7b6872c8f378997d5f072f0f3">qps_zero</a></div><div class="ttdeci">void qps_zero(qps_t *qps, void *ptr, size_t n)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l01845">qps.blk:1845</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gae499098fbf61287a5e06336a283eb827"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gae499098fbf61287a5e06336a283eb827">qps_hptr_realloc</a></div><div class="ttdeci">static ALWAYS_INLINE void * qps_hptr_realloc(qps_t *qps, size_t n, qps_hptr_t *cache)</div><div class="ttdef"><b>Definition</b> <a href="#l00509">qps.h:509</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gae693a754c2953e592c112c2c14223be3"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gae693a754c2953e592c112c2c14223be3">qps_handle_w_deref</a></div><div class="ttdeci">static ALWAYS_INLINE void * qps_handle_w_deref(qps_t *qps, qps_handle_t id)</div><div class="ttdef"><b>Definition</b> <a href="#l00470">qps.h:470</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gae7aa60472979ff77d332c91947473165"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gae7aa60472979ff77d332c91947473165">qps_pg_remap</a></div><div class="ttdeci">qps_pg_t qps_pg_remap(qps_t *qps, qps_pg_t blk, size_t size)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02045">qps.blk:2045</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gae9e62a5e0d4ea93b41601997d1f456f4"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gae9e62a5e0d4ea93b41601997d1f456f4">qps_realloc</a></div><div class="ttdeci">void * qps_realloc(qps_t *qps, qps_handle_t id, size_t size)</div><div class="ttdoc">Reallocs the memory behind a handle.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02361">qps.blk:2361</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gaee1e58f7eaf5356e7c893dd267db99e3"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gaee1e58f7eaf5356e7c893dd267db99e3">qps_roots_t</a></div><div class="ttdeci">struct qps_roots_t qps_roots_t</div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gaf6b2d3117a0f9e1563868fa25403c6d7"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gaf6b2d3117a0f9e1563868fa25403c6d7">qps_unlink</a></div><div class="ttdeci">int qps_unlink(const char *path)</div><div class="ttdoc">destroy a QPS in the given path.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02562">qps.blk:2562</a></div></div>
<div class="ttc" id="agroup__qkv____ll____qps_html_gaf6c2f1ceaf895ccd77c299415a92d666"><div class="ttname"><a href="../../d4/d36/group__qkv____ll____qps.html#gaf6c2f1ceaf895ccd77c299415a92d666">qps_t</a></div><div class="ttdeci">struct qps_t qps_t</div></div>
<div class="ttc" id="aiop_8h_html_aeb9848b789525ca1c6a3ae20f0cff40a"><div class="ttname"><a href="../../d3/d40/iop_8h.html#aeb9848b789525ca1c6a3ae20f0cff40a">name</a></div><div class="ttdeci">lstr_t name</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d40/iop_8h_source.html#l01707">iop.h:1707</a></div></div>
<div class="ttc" id="amem_8h_html_a307260f08d30ab055a3a8c3690064c1b"><div class="ttname"><a href="../../d9/d9a/mem_8h.html#a307260f08d30ab055a3a8c3690064c1b">GENERIC_NEW_INIT</a></div><div class="ttdeci">#define GENERIC_NEW_INIT(type, prefix)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d9a/mem_8h_source.html#l00921">mem.h:921</a></div></div>
<div class="ttc" id="amem_8h_html_a8273c9cb6784b3c093191196c5407689"><div class="ttname"><a href="../../d9/d9a/mem_8h.html#a8273c9cb6784b3c093191196c5407689">p_clear</a></div><div class="ttdeci">#define p_clear(p, count)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d9a/mem_8h_source.html#l00080">mem.h:80</a></div></div>
<div class="ttc" id="amem_8h_html_a8f02946515eaf9e344b8e1638ff561ba"><div class="ttname"><a href="../../d9/d9a/mem_8h.html#a8f02946515eaf9e344b8e1638ff561ba">GENERIC_DELETE</a></div><div class="ttdeci">#define GENERIC_DELETE(type, prefix)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d9a/mem_8h_source.html#l00927">mem.h:927</a></div></div>
<div class="ttc" id="amodule_8h_html_a6766340bc93958edde664cdf1fb15b6b"><div class="ttname"><a href="../../d5/d16/module_8h.html#a6766340bc93958edde664cdf1fb15b6b">MODULE_DECLARE</a></div><div class="ttdeci">#define MODULE_DECLARE(name)</div><div class="ttdoc">Declare a module.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d16/module_8h_source.html#l00173">module.h:173</a></div></div>
<div class="ttc" id="aqpage_8c_html_a3d4ae9c092e117c836f52dc7d7cee574"><div class="ttname"><a href="../../dc/d4b/qpage_8c.html#a3d4ae9c092e117c836f52dc7d7cee574">assert</a></div><div class="ttdeci">#define assert(...)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d4b/qpage_8c_source.html#l00060">qpage.c:60</a></div></div>
<div class="ttc" id="aqpage_8c_html_a9e0333f30c3ff0bc6fafc48091baeb3a"><div class="ttname"><a href="../../dc/d4b/qpage_8c.html#a9e0333f30c3ff0bc6fafc48091baeb3a">blks</a></div><div class="ttdeci">page_desc_t ** blks</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d4b/qpage_8c_source.html#l00098">qpage.c:98</a></div></div>
<div class="ttc" id="aqps_8blk_html_a913ee1fd5c281f44c36b47e9c7bfd7dd"><div class="ttname"><a href="../../d0/df7/qps_8blk.html#a913ee1fd5c281f44c36b47e9c7bfd7dd">qps_snapshot</a></div><div class="ttdeci">uint32_t qps_snapshot(qps_t *qps, const void *data, size_t dlen, void(^notify)(uint32_t))</div><div class="ttdoc">take a qps snapshot.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l02808">qps.blk:2808</a></div></div>
<div class="ttc" id="aqps_8blk_html_a9ec5ba963ccf8d1398483c60d7b03412"><div class="ttname"><a href="../../d0/df7/qps_8blk.html#a9ec5ba963ccf8d1398483c60d7b03412">qps_enospc</a></div><div class="ttdeci">void qps_enospc(qps_t *nullable qps, const char *what)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l01193">qps.blk:1193</a></div></div>
<div class="ttc" id="aqps_8h_html_a31834aac91191f1aeb6737db047c8e61"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#a31834aac91191f1aeb6737db047c8e61">QPS_PAGE_SHIFT</a></div><div class="ttdeci">#define QPS_PAGE_SHIFT</div><div class="ttdef"><b>Definition</b> <a href="#l00186">qps.h:186</a></div></div>
<div class="ttc" id="aqps_8h_html_a3e63992eca30608dd8f4ee031e96ca4a"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#a3e63992eca30608dd8f4ee031e96ca4a">QPS_ML1_LEVELS</a></div><div class="ttdeci">#define QPS_ML1_LEVELS</div><div class="ttdef"><b>Definition</b> <a href="#l00275">qps.h:275</a></div></div>
<div class="ttc" id="aqps_8h_html_a6dc664c0d4be16ca82ca864d4db4a5cc"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#a6dc664c0d4be16ca82ca864d4db4a5cc">QPS_PGL1_LEVELS</a></div><div class="ttdeci">#define QPS_PGL1_LEVELS</div><div class="ttdef"><b>Definition</b> <a href="#l00265">qps.h:265</a></div></div>
<div class="ttc" id="aqps_8h_html_a7b052ecc86c212a8246f8e7eb7624009"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#a7b052ecc86c212a8246f8e7eb7624009">QPS_PAGE_MASK</a></div><div class="ttdeci">#define QPS_PAGE_MASK</div><div class="ttdef"><b>Definition</b> <a href="#l00188">qps.h:188</a></div></div>
<div class="ttc" id="aqps_8h_html_a8e55ef18b951e0a2fe1b9c060028ebfc"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#a8e55ef18b951e0a2fe1b9c060028ebfc">QPS_MAP_MASK</a></div><div class="ttdeci">#define QPS_MAP_MASK</div><div class="ttdef"><b>Definition</b> <a href="#l00193">qps.h:193</a></div></div>
<div class="ttc" id="aqps_8h_html_a961d58b912f6d166ceeee08c40884e37"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#a961d58b912f6d166ceeee08c40884e37">QPS_PGL2_LEVELS</a></div><div class="ttdeci">#define QPS_PGL2_LEVELS</div><div class="ttdef"><b>Definition</b> <a href="#l00264">qps.h:264</a></div></div>
<div class="ttc" id="aqps_8h_html_a98c139d059f105851911e3ff48440449"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#a98c139d059f105851911e3ff48440449">QPS_PAGE_SIZE</a></div><div class="ttdeci">#define QPS_PAGE_SIZE</div><div class="ttdef"><b>Definition</b> <a href="#l00187">qps.h:187</a></div></div>
<div class="ttc" id="aqps_8h_html_ae55d99caf3c36578bad564f4340875e6"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#ae55d99caf3c36578bad564f4340875e6">QPS_HANDLES_COUNT</a></div><div class="ttdeci">#define QPS_HANDLES_COUNT</div><div class="ttdef"><b>Definition</b> <a href="#l00244">qps.h:244</a></div></div>
<div class="ttc" id="aqps_8h_html_af29239ab3f99609da95b2fe55167c73e"><div class="ttname"><a href="../../d2/d4d/qps_8h.html#af29239ab3f99609da95b2fe55167c73e">QPS_ML2_LEVELS</a></div><div class="ttdeci">#define QPS_ML2_LEVELS</div><div class="ttdef"><b>Definition</b> <a href="#l00274">qps.h:274</a></div></div>
<div class="ttc" id="astr-conv_8c_html_ad5228cd48403ef9d8b632f5c7c124720"><div class="ttname"><a href="../../d4/d9a/str-conv_8c.html#ad5228cd48403ef9d8b632f5c7c124720">n</a></div><div class="ttdeci">#define n</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d9a/str-conv_8c_source.html#l00321">str-conv.c:321</a></div></div>
<div class="ttc" id="astructdir__lock__t_html"><div class="ttname"><a href="../../d2/d3c/structdir__lock__t.html">dir_lock_t</a></div><div class="ttdoc">Directory lock.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dea/unix_8h_source.html#l00091">unix.h:91</a></div></div>
<div class="ttc" id="astructdlist__t_html"><div class="ttname"><a href="../../db/ddb/structdlist__t.html">dlist_t</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d1a/container-dlist_8h_source.html#l00093">container-dlist.h:93</a></div></div>
<div class="ttc" id="astructev__t_html"><div class="ttname"><a href="../../d2/d74/structev__t.html">ev_t</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d5a/el_8blk_source.html#l00094">el.blk:94</a></div></div>
<div class="ttc" id="astructlogger__t_html"><div class="ttname"><a href="../../d5/d64/structlogger__t.html">logger_t</a></div><div class="ttdoc">Logger structure.</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d7f/log_8h_source.html#l00137">log.h:137</a></div></div>
<div class="ttc" id="astructqps__gcmap__t_html"><div class="ttname"><a href="../../d4/d51/structqps__gcmap__t.html">qps_gcmap_t</a></div><div class="ttdef"><b>Definition</b> <a href="#l00213">qps.h:213</a></div></div>
<div class="ttc" id="astructqps__gcmap__t_html_a08ca2811487f52b2bc74c85582ff9c8d"><div class="ttname"><a href="../../d4/d51/structqps__gcmap__t.html#a08ca2811487f52b2bc74c85582ff9c8d">qps_gcmap_t::mark</a></div><div class="ttdeci">uint32_t mark</div><div class="ttdef"><b>Definition</b> <a href="#l00215">qps.h:215</a></div></div>
<div class="ttc" id="astructqps__gcmap__t_html_a4381a543fb81b61527460a52f1a35d55"><div class="ttname"><a href="../../d4/d51/structqps__gcmap__t.html#a4381a543fb81b61527460a52f1a35d55">qps_gcmap_t::map</a></div><div class="ttdeci">qps_map_t * map</div><div class="ttdef"><b>Definition</b> <a href="#l00214">qps.h:214</a></div></div>
<div class="ttc" id="astructqps__gcmap__t_html_a4e8d50cb867a13b2917548cbb5d59f28"><div class="ttname"><a href="../../d4/d51/structqps__gcmap__t.html#a4e8d50cb867a13b2917548cbb5d59f28">qps_gcmap_t::disk_usage</a></div><div class="ttdeci">uint32_t disk_usage</div><div class="ttdef"><b>Definition</b> <a href="#l00218">qps.h:218</a></div></div>
<div class="ttc" id="astructqps__gcmap__t_html_a982eac25173a07ffd786f100fa69aafb"><div class="ttname"><a href="../../d4/d51/structqps__gcmap__t.html#a982eac25173a07ffd786f100fa69aafb">qps_gcmap_t::gen</a></div><div class="ttdeci">uint32_t gen</div><div class="ttdef"><b>Definition</b> <a href="#l00216">qps.h:216</a></div></div>
<div class="ttc" id="astructqps__gcmap__t_html_aef04af5474ad2fe58d76e6f59f07cab5"><div class="ttname"><a href="../../d4/d51/structqps__gcmap__t.html#aef04af5474ad2fe58d76e6f59f07cab5">qps_gcmap_t::allocated</a></div><div class="ttdeci">uint32_t allocated</div><div class="ttdef"><b>Definition</b> <a href="#l00217">qps.h:217</a></div></div>
<div class="ttc" id="astructqps__hptr__t_html"><div class="ttname"><a href="../../d4/d17/structqps__hptr__t.html">qps_hptr_t</a></div><div class="ttdoc">Type for caching the result of the dereferencement of a handle.</div><div class="ttdef"><b>Definition</b> <a href="#l00155">qps.h:155</a></div></div>
<div class="ttc" id="astructqps__hptr__t_html_a25e53c9af5970f07f99af0df68f27045"><div class="ttname"><a href="../../d4/d17/structqps__hptr__t.html#a25e53c9af5970f07f99af0df68f27045">qps_hptr_t::gc_gen</a></div><div class="ttdeci">uint32_t gc_gen</div><div class="ttdef"><b>Definition</b> <a href="#l00157">qps.h:157</a></div></div>
<div class="ttc" id="astructqps__hptr__t_html_aa7f14ef9a158e76b2ba107c2771395e8"><div class="ttname"><a href="../../d4/d17/structqps__hptr__t.html#aa7f14ef9a158e76b2ba107c2771395e8">qps_hptr_t::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition</b> <a href="#l00156">qps.h:156</a></div></div>
<div class="ttc" id="astructqps__hptr__t_html_af5e45c94258fd85d0cccf1134e361217"><div class="ttname"><a href="../../d4/d17/structqps__hptr__t.html#af5e45c94258fd85d0cccf1134e361217">qps_hptr_t::handle</a></div><div class="ttdeci">qps_handle_t handle</div><div class="ttdef"><b>Definition</b> <a href="#l00158">qps.h:158</a></div></div>
<div class="ttc" id="astructqps__mhdr__t_html"><div class="ttname"><a href="../../dd/d7c/structqps__mhdr__t.html">qps_mhdr_t</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l00177">qps.blk:177</a></div></div>
<div class="ttc" id="astructqps__pghdr__t_html"><div class="ttname"><a href="../../d2/dd8/structqps__pghdr__t.html">qps_pghdr_t</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/df7/qps_8blk_source.html#l00161">qps.blk:161</a></div></div>
<div class="ttc" id="astructqps__ptr__t_html"><div class="ttname"><a href="../../dc/da4/structqps__ptr__t.html">qps_ptr_t</a></div><div class="ttdoc">Type of a qps generic relocatable pointer.</div><div class="ttdef"><b>Definition</b> <a href="#l00140">qps.h:140</a></div></div>
<div class="ttc" id="astructqps__ptr__t_html_a75aafa84ac9d39fb86a15fa3b59e76f1"><div class="ttname"><a href="../../dc/da4/structqps__ptr__t.html#a75aafa84ac9d39fb86a15fa3b59e76f1">qps_ptr_t::pgno</a></div><div class="ttdeci">qps_pg_t pgno</div><div class="ttdoc">page the pointer points into.</div><div class="ttdef"><b>Definition</b> <a href="#l00146">qps.h:146</a></div></div>
<div class="ttc" id="astructqps__ptr__t_html_ac33adf501073d78521e2f1bd38477416"><div class="ttname"><a href="../../dc/da4/structqps__ptr__t.html#ac33adf501073d78521e2f1bd38477416">qps_ptr_t::addr</a></div><div class="ttdeci">uint32_t addr</div><div class="ttdoc">offset in the page, should be in [0 .</div><div class="ttdef"><b>Definition</b> <a href="#l00142">qps.h:142</a></div></div>
<div class="ttc" id="astructqps__roots__t_html"><div class="ttname"><a href="../../d8/de7/structqps__roots__t.html">qps_roots_t</a></div><div class="ttdef"><b>Definition</b> <a href="#l00538">qps.h:538</a></div></div>
<div class="ttc" id="astructqps__roots__t_html_a1070df450e925d7866a1c5b0bda84428"><div class="ttname"><a href="../../d8/de7/structqps__roots__t.html#a1070df450e925d7866a1c5b0bda84428">qps_roots_t::qv_t</a></div><div class="ttdeci">qv_t(qps_pg) pages</div></div>
<div class="ttc" id="astructqps__roots__t_html_a53cb016c89182ee80c25cf97400a11b1"><div class="ttname"><a href="../../d8/de7/structqps__roots__t.html#a53cb016c89182ee80c25cf97400a11b1">qps_roots_t::qv_t</a></div><div class="ttdeci">qv_t(qps_handle) handles</div></div>
<div class="ttc" id="astructqps__stats_html"><div class="ttname"><a href="../../d8/de0/structqps__stats.html">qps_stats</a></div><div class="ttdef"><b>Definition</b> <a href="#l00288">qps.h:288</a></div></div>
<div class="ttc" id="astructqps__stats_html_a0378487d2b545b91742aac77710f81d8"><div class="ttname"><a href="../../d8/de0/structqps__stats.html#a0378487d2b545b91742aac77710f81d8">qps_stats::n_pages</a></div><div class="ttdeci">size_t n_pages</div><div class="ttdef"><b>Definition</b> <a href="#l00290">qps.h:290</a></div></div>
<div class="ttc" id="astructqps__stats_html_a19884f62114c32035899f9070a8d7177"><div class="ttname"><a href="../../d8/de0/structqps__stats.html#a19884f62114c32035899f9070a8d7177">qps_stats::ro_allocs</a></div><div class="ttdeci">size_t ro_allocs</div><div class="ttdef"><b>Definition</b> <a href="#l00291">qps.h:291</a></div></div>
<div class="ttc" id="astructqps__stats_html_a435973aa2eccf6a919b1f2fa33b0d3ab"><div class="ttname"><a href="../../d8/de0/structqps__stats.html#a435973aa2eccf6a919b1f2fa33b0d3ab">qps_stats::rw_allocs</a></div><div class="ttdeci">size_t rw_allocs</div><div class="ttdef"><b>Definition</b> <a href="#l00292">qps.h:292</a></div></div>
<div class="ttc" id="astructqps__stats_html_a4c2459e7f1c320319813efba7119d028"><div class="ttname"><a href="../../d8/de0/structqps__stats.html#a4c2459e7f1c320319813efba7119d028">qps_stats::n_maps</a></div><div class="ttdeci">size_t n_maps</div><div class="ttdef"><b>Definition</b> <a href="#l00289">qps.h:289</a></div></div>
<div class="ttc" id="astructqps__stats_html_a8734da8d2287db073c03d2d65fa71858"><div class="ttname"><a href="../../d8/de0/structqps__stats.html#a8734da8d2287db073c03d2d65fa71858">qps_stats::pages</a></div><div class="ttdeci">int pages</div><div class="ttdef"><b>Definition</b> <a href="#l00294">qps.h:294</a></div></div>
<div class="ttc" id="astructqps__stats_html_a9c81cb6cfb60c1c62df5f15df0000e30"><div class="ttname"><a href="../../d8/de0/structqps__stats.html#a9c81cb6cfb60c1c62df5f15df0000e30">qps_stats::pages_free</a></div><div class="ttdeci">int pages_free</div><div class="ttdef"><b>Definition</b> <a href="#l00295">qps.h:295</a></div></div>
<div class="ttc" id="astructqps__stats_html_ad21a358f461bdb909b10c5384f823957"><div class="ttname"><a href="../../d8/de0/structqps__stats.html#ad21a358f461bdb909b10c5384f823957">qps_stats::n_pages_free</a></div><div class="ttdeci">size_t n_pages_free</div><div class="ttdef"><b>Definition</b> <a href="#l00293">qps.h:293</a></div></div>
<div class="ttc" id="astructqps__t_html"><div class="ttname"><a href="../../d7/d64/structqps__t.html">qps_t</a></div><div class="ttdef"><b>Definition</b> <a href="#l00228">qps.h:228</a></div></div>
<div class="ttc" id="astructqps__t_html_a05bd2f36d0d1050c3d769750d5d50347"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a05bd2f36d0d1050c3d769750d5d50347">qps_t::hdrs</a></div><div class="ttdeci">qps_pghdr_t * hdrs</div><div class="ttdef"><b>Definition</b> <a href="#l00251">qps.h:251</a></div></div>
<div class="ttc" id="astructqps__t_html_a07ef1acc88b6e884a886bbedd12c29b8"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a07ef1acc88b6e884a886bbedd12c29b8">qps_t::l2_bitmap</a></div><div class="ttdeci">uint32_t l2_bitmap[(16UL - 5U+1)]</div><div class="ttdef"><b>Definition</b> <a href="#l00267">qps.h:267</a></div></div>
<div class="ttc" id="astructqps__t_html_a12a5bd3b00947b818b72306e26314937"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a12a5bd3b00947b818b72306e26314937">qps_t::handles_max</a></div><div class="ttdeci">uint32_t handles_max</div><div class="ttdef"><b>Definition</b> <a href="#l00246">qps.h:246</a></div></div>
<div class="ttc" id="astructqps__t_html_a18e129182a459bd72dd86b6752b59974"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a18e129182a459bd72dd86b6752b59974">qps_t::handles_gc_gen</a></div><div class="ttdeci">uint32_t handles_gc_gen</div><div class="ttdef"><b>Definition</b> <a href="#l00248">qps.h:248</a></div></div>
<div class="ttc" id="astructqps__t_html_a1f57ef4623a7cc63ac9ceadf239b9e02"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a1f57ef4623a7cc63ac9ceadf239b9e02">qps_t::handles_freelist</a></div><div class="ttdeci">uint32_t handles_freelist</div><div class="ttdef"><b>Definition</b> <a href="#l00247">qps.h:247</a></div></div>
<div class="ttc" id="astructqps__t_html_a2970fff09f6f30f3a7cd6cef2d39fe70"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a2970fff09f6f30f3a7cd6cef2d39fe70">qps_t::snapshot_syn</a></div><div class="ttdeci">thr_syn_t * snapshot_syn</div><div class="ttdef"><b>Definition</b> <a href="#l00253">qps.h:253</a></div></div>
<div class="ttc" id="astructqps__t_html_a2e6dd3ae758c92e5f1f9e6420ff510b4"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a2e6dd3ae758c92e5f1f9e6420ff510b4">qps_t::tracing_logger</a></div><div class="ttdeci">logger_t tracing_logger</div><div class="ttdef"><b>Definition</b> <a href="#l00230">qps.h:230</a></div></div>
<div class="ttc" id="astructqps__t_html_a39581d995a741a427a18108e704cb304"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a39581d995a741a427a18108e704cb304">qps_t::l1_bitmap</a></div><div class="ttdeci">uint32_t l1_bitmap</div><div class="ttdef"><b>Definition</b> <a href="#l00266">qps.h:266</a></div></div>
<div class="ttc" id="astructqps__t_html_a3aac99eb06b19d10b39baa60324873ec"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a3aac99eb06b19d10b39baa60324873ec">qps_t::snap_notify</a></div><div class="ttdeci">qps_notify_b snap_notify</div><div class="ttdef"><b>Definition</b> <a href="#l00256">qps.h:256</a></div></div>
<div class="ttc" id="astructqps__t_html_a495ac8ed8866f3c16cbad73dc8a54063"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a495ac8ed8866f3c16cbad73dc8a54063">qps_t::snap_max_duration</a></div><div class="ttdeci">uint32_t snap_max_duration</div><div class="ttdef"><b>Definition</b> <a href="#l00260">qps.h:260</a></div></div>
<div class="ttc" id="astructqps__t_html_a4d176e8df0048d4067f03c7d325e0634"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a4d176e8df0048d4067f03c7d325e0634">qps_t::dfd</a></div><div class="ttdeci">int dfd</div><div class="ttdef"><b>Definition</b> <a href="#l00233">qps.h:233</a></div></div>
<div class="ttc" id="astructqps__t_html_a4f1f4defc15bc2ce0d565641f9701f62"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a4f1f4defc15bc2ce0d565641f9701f62">qps_t::qv_t</a></div><div class="ttdeci">qv_t(u32) no_free</div></div>
<div class="ttc" id="astructqps__t_html_a50f8bbdd5cadb04d53f4e7da9c5d44ff"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a50f8bbdd5cadb04d53f4e7da9c5d44ff">qps_t::snap_start</a></div><div class="ttdeci">struct timeval snap_start</div><div class="ttdef"><b>Definition</b> <a href="#l00258">qps.h:258</a></div></div>
<div class="ttc" id="astructqps__t_html_a5620eb9eb985ade5b283400e47f77c1d"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a5620eb9eb985ade5b283400e47f77c1d">qps_t::snapshotting</a></div><div class="ttdeci">uint16_t snapshotting</div><div class="ttdef"><b>Definition</b> <a href="#l00234">qps.h:234</a></div></div>
<div class="ttc" id="astructqps__t_html_a5712b95b39f360453e57fc085686f6e7"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a5712b95b39f360453e57fc085686f6e7">qps_t::handles</a></div><div class="ttdeci">qps_ptr_t ** handles</div><div class="ttdef"><b>Definition</b> <a href="#l00245">qps.h:245</a></div></div>
<div class="ttc" id="astructqps__t_html_a58ea0ab64844f95b3017d9f5e8484dd9"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a58ea0ab64844f95b3017d9f5e8484dd9">qps_t::snap_timer_el</a></div><div class="ttdeci">el_t snap_timer_el</div><div class="ttdef"><b>Definition</b> <a href="#l00255">qps.h:255</a></div></div>
<div class="ttc" id="astructqps__t_html_a7c2f223ad36d0080910ddab8b50c6290"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a7c2f223ad36d0080910ddab8b50c6290">qps_t::qv_t</a></div><div class="ttdeci">qv_t(qpsm) omaps</div></div>
<div class="ttc" id="astructqps__t_html_a886c1e25634ef0e0618ae921b514977b"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a886c1e25634ef0e0618ae921b514977b">qps_t::qv_t</a></div><div class="ttdeci">qv_t(u32) no_blocked</div></div>
<div class="ttc" id="astructqps__t_html_a89b4a12753cb2b5d70315e9066e042f4"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a89b4a12753cb2b5d70315e9066e042f4">qps_t::qv_t</a></div><div class="ttdeci">qv_t(qpsm) smaps</div></div>
<div class="ttc" id="astructqps__t_html_a8fd50496878c55e2ad3cfe1d64203134"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a8fd50496878c55e2ad3cfe1d64203134">qps_t::lock</a></div><div class="ttdeci">dir_lock_t lock</div><div class="ttdef"><b>Definition</b> <a href="#l00232">qps.h:232</a></div></div>
<div class="ttc" id="astructqps__t_html_a966115ccc2e281f50698d88d7667ca44"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a966115ccc2e281f50698d88d7667ca44">qps_t::gc_map</a></div><div class="ttdeci">qps_map_t * gc_map</div><div class="ttdef"><b>Definition</b> <a href="#l00252">qps.h:252</a></div></div>
<div class="ttc" id="astructqps__t_html_a9f55862e74caec049a4a04a94e361098"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a9f55862e74caec049a4a04a94e361098">qps_t::generation</a></div><div class="ttdeci">uint32_t generation</div><div class="ttdef"><b>Definition</b> <a href="#l00235">qps.h:235</a></div></div>
<div class="ttc" id="astructqps__t_html_a9fb2669703cf14cfb361f9a877f5e7f6"><div class="ttname"><a href="../../d7/d64/structqps__t.html#a9fb2669703cf14cfb361f9a877f5e7f6">qps_t::pgs</a></div><div class="ttdeci">struct qps_t::@186 pgs</div></div>
<div class="ttc" id="astructqps__t_html_ac24bce48421303eea528dbd0e028287e"><div class="ttname"><a href="../../d7/d64/structqps__t.html#ac24bce48421303eea528dbd0e028287e">qps_t::snap_pid</a></div><div class="ttdeci">pid_t snap_pid</div><div class="ttdef"><b>Definition</b> <a href="#l00257">qps.h:257</a></div></div>
<div class="ttc" id="astructqps__t_html_ac828d407275a53ab508e37d97f0c2915"><div class="ttname"><a href="../../d7/d64/structqps__t.html#ac828d407275a53ab508e37d97f0c2915">qps_t::blks</a></div><div class="ttdeci">qps_pg_t blks[(16UL - 5U+1)][bitsizeof(uint32_t)]</div><div class="ttdef"><b>Definition</b> <a href="#l00268">qps.h:268</a></div></div>
<div class="ttc" id="astructqps__t_html_ace3c012914b3e8fc48697d14cd1a8333"><div class="ttname"><a href="../../d7/d64/structqps__t.html#ace3c012914b3e8fc48697d14cd1a8333">qps_t::logger</a></div><div class="ttdeci">logger_t logger</div><div class="ttdef"><b>Definition</b> <a href="#l00229">qps.h:229</a></div></div>
<div class="ttc" id="astructqps__t_html_adb4efe6c98c7539cc8ec74f969c1b74c"><div class="ttname"><a href="../../d7/d64/structqps__t.html#adb4efe6c98c7539cc8ec74f969c1b74c">qps_t::snap_el</a></div><div class="ttdeci">el_t snap_el</div><div class="ttdef"><b>Definition</b> <a href="#l00254">qps.h:254</a></div></div>
<div class="ttc" id="astructqps__t_html_aea8c11fa421020ae7f441510c7a797c5"><div class="ttname"><a href="../../d7/d64/structqps__t.html#aea8c11fa421020ae7f441510c7a797c5">qps_t::snap_gen</a></div><div class="ttdeci">uint32_t snap_gen</div><div class="ttdef"><b>Definition</b> <a href="#l00259">qps.h:259</a></div></div>
<div class="ttc" id="astructqps__t_html_aeaf3b246f8a4046b1ea2fd7db056a8fd"><div class="ttname"><a href="../../d7/d64/structqps__t.html#aeaf3b246f8a4046b1ea2fd7db056a8fd">qps_t::qv_t</a></div><div class="ttdeci">qv_t(qpsm) maps</div></div>
<div class="ttc" id="astructqps__t_html_af08036ff84b4e5255b35961052101862"><div class="ttname"><a href="../../d7/d64/structqps__t.html#af08036ff84b4e5255b35961052101862">qps_t::qps_link</a></div><div class="ttdeci">dlist_t qps_link</div><div class="ttdef"><b>Definition</b> <a href="#l00241">qps.h:241</a></div></div>
<div class="ttc" id="astructqps__t_html_af340841bb91d6a1ef100222c1aff9c66"><div class="ttname"><a href="../../d7/d64/structqps__t.html#af340841bb91d6a1ef100222c1aff9c66">qps_t::m</a></div><div class="ttdeci">struct qps_t::@187 m</div></div>
<div class="ttc" id="astructsb__t_html"><div class="ttname"><a href="../../d8/d4d/structsb__t.html">sb_t</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/d31/str-buf_8h_source.html#l00079">str-buf.h:79</a></div></div>
<div class="ttc" id="athr-job_8blk_html_a4136e2ce9c302f15b3f7a470e6a665bb"><div class="ttname"><a href="../../dc/d4b/thr-job_8blk.html#a4136e2ce9c302f15b3f7a470e6a665bb">syn</a></div><div class="ttdeci">thr_syn_t * syn</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d4b/thr-job_8blk_source.html#l00002">thr-job.blk:2</a></div></div>
<div class="ttc" id="aunionqps__map__t_html"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html">qps_map_t</a></div><div class="ttdef"><b>Definition</b> <a href="#l00185">qps.h:185</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_a13ad3abcf77e98b0c9612648185718ca"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#a13ad3abcf77e98b0c9612648185718ca">qps_map_t::disk_usage</a></div><div class="ttdeci">uint32_t disk_usage</div><div class="ttdef"><b>Definition</b> <a href="#l00208">qps.h:208</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_a14692b432d1ea84ed557853e0bf5a1f2"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#a14692b432d1ea84ed557853e0bf5a1f2">qps_map_t::qps</a></div><div class="ttdeci">struct qps_t * qps</div><div class="ttdef"><b>Definition</b> <a href="#l00206">qps.h:206</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_a30efa5bf64ad2e523dd9e444e2ca6300"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#a30efa5bf64ad2e523dd9e444e2ca6300">qps_map_t::__padding</a></div><div class="ttdeci">uint8_t __padding[(1UL&lt;&lt; 12UL)/2 - 16 - 3 *4]</div><div class="ttdef"><b>Definition</b> <a href="#l00203">qps.h:203</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_a3e4904cad62f029645e37190e5e13e6e"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#a3e4904cad62f029645e37190e5e13e6e">qps_map_t::sig</a></div><div class="ttdeci">uint8_t sig[16]</div><div class="ttdef"><b>Definition</b> <a href="#l00199">qps.h:199</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_a537ce2732ce4af6326b8ac4c0fc43d6b"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#a537ce2732ce4af6326b8ac4c0fc43d6b">qps_map_t::mapno</a></div><div class="ttdeci">uint32_t mapno</div><div class="ttdef"><b>Definition</b> <a href="#l00200">qps.h:200</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_a6008fb8a4b9e0517594e8d353c7fbfe0"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#a6008fb8a4b9e0517594e8d353c7fbfe0">qps_map_t::hdr</a></div><div class="ttdeci">struct qps_map_t::@185 hdr</div></div>
<div class="ttc" id="aunionqps__map__t_html_a81cbff3f0636630f4f88f219eafcadbc"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#a81cbff3f0636630f4f88f219eafcadbc">qps_map_t::data</a></div><div class="ttdeci">uint8_t data[(1UL&lt;&lt; 12UL)]</div><div class="ttdef"><b>Definition</b> <a href="#l00210">qps.h:210</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_ac6a5be6c2e01ecdedbd6fb5d6bcece45"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#ac6a5be6c2e01ecdedbd6fb5d6bcece45">qps_map_t::generation</a></div><div class="ttdeci">uint32_t generation</div><div class="ttdef"><b>Definition</b> <a href="#l00201">qps.h:201</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_aeb7a4b64029eba224adc2a76f3b57708"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#aeb7a4b64029eba224adc2a76f3b57708">qps_map_t::allocated</a></div><div class="ttdeci">uint32_t allocated</div><div class="ttdef"><b>Definition</b> <a href="#l00202">qps.h:202</a></div></div>
<div class="ttc" id="aunionqps__map__t_html_aed3fcb60d33fc230bbac842de790703c"><div class="ttname"><a href="../../dd/d6b/unionqps__map__t.html#aed3fcb60d33fc230bbac842de790703c">qps_map_t::remaining</a></div><div class="ttdeci">uint32_t remaining</div><div class="ttdef"><b>Definition</b> <a href="#l00207">qps.h:207</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jan 19 2024 09:55:03 for lib-common by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
